/*
MySQL Data Transfer
Source Host: localhost
Source Database: gms
Target Host: localhost
Target Database: gms
Date: 2018/6/5 –«∆⁄∂˛ œ¬ŒÁ 7:41:25
*/

SET FOREIGN_KEY_CHECKS=0;
-- ----------------------------
-- Table structure for adminuser
-- ----------------------------
CREATE TABLE `adminuser` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `nickname` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `password` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `email` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `profile` text COLLATE utf8_unicode_ci,
  `auth_key` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `password_hash` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `password_reset_token` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- ----------------------------
-- Table structure for auth_assignment
-- ----------------------------
CREATE TABLE `auth_assignment` (
  `item_name` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `user_id` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` int(11) DEFAULT NULL,
  PRIMARY KEY (`item_name`,`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- ----------------------------
-- Table structure for auth_item
-- ----------------------------
CREATE TABLE `auth_item` (
  `name` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `type` int(11) NOT NULL,
  `description` text COLLATE utf8_unicode_ci,
  `rule_name` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL,
  `data` text COLLATE utf8_unicode_ci,
  `created_at` int(11) DEFAULT NULL,
  `updated_at` int(11) DEFAULT NULL,
  PRIMARY KEY (`name`),
  KEY `rule_name` (`rule_name`),
  KEY `idx-auth_item-type` (`type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- ----------------------------
-- Table structure for auth_item_child
-- ----------------------------
CREATE TABLE `auth_item_child` (
  `parent` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `child` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`parent`,`child`),
  KEY `child` (`child`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- ----------------------------
-- Table structure for auth_rule
-- ----------------------------
CREATE TABLE `auth_rule` (
  `name` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `data` text COLLATE utf8_unicode_ci,
  `created_at` int(11) DEFAULT NULL,
  `updated_at` int(11) DEFAULT NULL,
  PRIMARY KEY (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- ----------------------------
-- Table structure for comment
-- ----------------------------
CREATE TABLE `comment` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `content` text COLLATE utf8_unicode_ci NOT NULL,
  `status` int(11) NOT NULL,
  `create_time` int(11) DEFAULT NULL,
  `userid` int(11) NOT NULL,
  `email` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `url` varchar(128) COLLATE utf8_unicode_ci DEFAULT NULL,
  `post_id` int(11) NOT NULL,
  `remind` int(4) DEFAULT '0' COMMENT '0:Êú™ÊèêÈÜí1ÔºöÂ∑≤ÊèêÈÜí',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=103 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- ----------------------------
-- Table structure for commentstatus
-- ----------------------------
CREATE TABLE `commentstatus` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `position` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- ----------------------------
-- Table structure for migration
-- ----------------------------
CREATE TABLE `migration` (
  `version` varchar(180) NOT NULL,
  `apply_time` int(11) DEFAULT NULL,
  PRIMARY KEY (`version`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Table structure for post
-- ----------------------------
CREATE TABLE `post` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `content` text COLLATE utf8_unicode_ci NOT NULL,
  `tags` text COLLATE utf8_unicode_ci,
  `status` int(11) NOT NULL,
  `create_time` int(11) DEFAULT NULL,
  `update_time` int(11) DEFAULT NULL,
  `author_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=38 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- ----------------------------
-- Table structure for poststatus
-- ----------------------------
CREATE TABLE `poststatus` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `position` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- ----------------------------
-- Table structure for tag
-- ----------------------------
CREATE TABLE `tag` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `frequency` int(11) DEFAULT '1',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=76 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- ----------------------------
-- Table structure for user
-- ----------------------------
CREATE TABLE `user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `auth_key` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `password_hash` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `password_reset_token` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `status` smallint(6) NOT NULL DEFAULT '10',
  `created_at` int(11) NOT NULL,
  `updated_at` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`),
  UNIQUE KEY `email` (`email`),
  UNIQUE KEY `password_reset_token` (`password_reset_token`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- ----------------------------
-- Records 
-- ----------------------------
INSERT INTO `adminuser` VALUES ('1', 'sr', 'ËãèA', '$2y$13$RZ20K81ZdERPDyFq2EM31e6KjmmdNRtGmCC6Fq9NST3hWhcgoPqUy', 'webmaster@example.com.cn', 'hello,this is my profile', 'pG7TRyTIXlEbcenpi34TzmMYS2zDsMTF', '$2y$13$4Y5KRDHPFYF.rYumLe6rx.34gBLpK6HROMklh9A8.TZwRFNrM5RyW', null);
INSERT INTO `adminuser` VALUES ('2', 'chengsc', 'Á®ãÊÄùÂüé', '$2y$13$RZ20K81ZdERPDyFq2EM31e6KjmmdNRtGmCC6Fq9NST3hWhcgoPqUy', 'tim@u2000.com', 'a testing user', 'pG7TRyTIXlEbcenpi34TzmMYS2zDsMTF', '$2y$13$HtJqGRmc76KIRIwokii8AOQ1XZljXiuWCKUGFnH9vkTnfBpHtqgFu', null);
INSERT INTO `adminuser` VALUES ('3', 'heyx', '‰ΩïÊ∞∏ÂÖ¥', '$2y$13$RZ20K81ZdERPDyFq2EM31e6KjmmdNRtGmCC6Fq9NST3hWhcgoPqUy', 'heyx@hotmail.com', 'a testing user', 'pG7TRyTIXlEbcenpi34TzmMYS2zDsMTF', '$2y$13$HtJqGRmc76KIRIwokii8AOQ1XZljXiuWCKUGFnH9vkTnfBpHtqgFu', null);
INSERT INTO `adminuser` VALUES ('5', 'testadmin', 'testadmin', '*', 'testinguser@gmail.com', 'test', 'sAivVF-oznEEXaKeSLdJb0_UNAOjq1Dv', '$2y$13$Ac1SRzsv4zuzpmSJSpp32.Xrgub6rnSmOClwf/fr635tz3kD5v3pu', null);
INSERT INTO `adminuser` VALUES ('6', 'dodo', 'dodo', '*', 'testinguser@gmail.com', 'test', 'sAivVF-oznEEXaKeSLdJb0_UNAOjq1Dv', '$2y$13$Ac1SRzsv4zuzpmSJSpp32.Xrgub6rnSmOClwf/fr635tz3kD5v3pu', null);
INSERT INTO `adminuser` VALUES ('7', 'dobest', 'dd', '*', 'su@123.com', '', 'N5hpFTgwRQoBjh6mEq4cyeaHZuE4vGMS', '$2y$13$BZBDm4JfnNeu1jc.ThA4iuyFfA.KQ338ZIOy0IV/Ohyjm0VG.Z6DC', null);
INSERT INTO `auth_assignment` VALUES ('admin', '1', '1527936360');
INSERT INTO `auth_assignment` VALUES ('admin', '7', '1527772378');
INSERT INTO `auth_assignment` VALUES ('commentAuditor', '1', '1527936360');
INSERT INTO `auth_assignment` VALUES ('commentAuditor', '4', '1465177361');
INSERT INTO `auth_assignment` VALUES ('postAdmin', '1', '1527936360');
INSERT INTO `auth_assignment` VALUES ('postAdmin', '2', '1477816632');
INSERT INTO `auth_assignment` VALUES ('postAdmin', '7', '1527772378');
INSERT INTO `auth_assignment` VALUES ('postOperator', '1', '1527936360');
INSERT INTO `auth_assignment` VALUES ('postOperator', '3', '1465177361');
INSERT INTO `auth_item` VALUES ('admin', '1', 'Á≥ªÁªüÁÆ°ÁêÜÂëò', null, null, '1465177361', '1465177361');
INSERT INTO `auth_item` VALUES ('approveComment', '2', 'ÂÆ°Ê†∏ËØÑËÆ∫', null, null, '1465177361', '1465177361');
INSERT INTO `auth_item` VALUES ('commentAuditor', '1', 'ËØÑËÆ∫ÂÆ°Ê†∏Âëò', null, null, '1465177361', '1465177361');
INSERT INTO `auth_item` VALUES ('createPost', '2', 'Êñ∞Â¢ûÊñáÁ´†', null, null, '1465177361', '1465177361');
INSERT INTO `auth_item` VALUES ('deletePost', '2', 'Âà†Èô§ÊñáÁ´†', null, null, '1465177361', '1465177361');
INSERT INTO `auth_item` VALUES ('postAdmin', '1', 'ÊñáÁ´†ÁÆ°ÁêÜÂëò', null, null, '1465177361', '1465177361');
INSERT INTO `auth_item` VALUES ('postOperator', '1', 'ÊñáÁ´†Êìç‰ΩúÂëò', null, null, '1465177361', '1465177361');
INSERT INTO `auth_item` VALUES ('updatePost', '2', '‰øÆÊîπÊñáÁ´†', null, null, '1465177361', '1465177361');
INSERT INTO `auth_item_child` VALUES ('commentAuditor', 'approveComment');
INSERT INTO `auth_item_child` VALUES ('admin', 'commentAuditor');
INSERT INTO `auth_item_child` VALUES ('postAdmin', 'createPost');
INSERT INTO `auth_item_child` VALUES ('postAdmin', 'deletePost');
INSERT INTO `auth_item_child` VALUES ('postOperator', 'deletePost');
INSERT INTO `auth_item_child` VALUES ('admin', 'postAdmin');
INSERT INTO `auth_item_child` VALUES ('postAdmin', 'updatePost');
INSERT INTO `comment` VALUES ('88', 'ÂÅáËÆæ‰Ω†ÊÉ≥ÈÄöËøá RESTful È£éÊ†ºÁöÑ API Êù•Â±ïÁ§∫Áî®Êà∑Êï∞ÊçÆ„ÄÇÁî®Êà∑Êï∞ÊçÆË¢´Â≠òÂÇ®Âú®Áî®Êà∑DBË°®Ôºå ‰Ω†Â∑≤ÁªèÂàõÂª∫‰∫Ü yii\\db\\ActiveRecord Á±ª app\\models\\User Êù•ËÆøÈóÆËØ•Áî®Êà∑Êï∞ÊçÆ.', '2', '1443004317', '1', 'sxb@hotmail.com', 'www.wj.com', '41', '1');
INSERT INTO `comment` VALUES ('89', 'yii\\db\\Query::one() ÊñπÊ≥ïÂè™ËøîÂõûÊü•ËØ¢ÁªìÊûúÂΩì‰∏≠ÁöÑÁ¨¨‰∏ÄÊù°Êï∞ÊçÆÔºå Êù°‰ª∂ËØ≠Âè•‰∏≠‰∏ç‰ºöÂä†‰∏ä LIMIT 1 Êù°‰ª∂„ÄÇÂ¶ÇÊûú‰Ω†Ê∏ÖÊ•öÁöÑÁü•ÈÅìÊü•ËØ¢Â∞Ü‰ºöÂè™ËøîÂõû‰∏ÄË°åÊàñÂá†Ë°åÊï∞ÊçÆ Ôºà‰æãÂ¶ÇÔºå Â¶ÇÊûú‰Ω†ÊòØÈÄöËøáÊüê‰∫õ‰∏ªÈîÆÊù•Êü•ËØ¢ÁöÑÔºâÔºåËøôÂæàÂ•Ω‰πüÊèêÂÄ°ËøôÊ†∑ÂÅö„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûúÊü•ËØ¢ÁªìÊûú ÊúâÊú∫‰ºöËøîÂõûÂ§ßÈáèÁöÑÊï∞ÊçÆÊó∂ÔºåÈÇ£‰πà‰Ω†Â∫îËØ•ÊòæÁ§∫Ë∞ÉÁî® limit(1) ÊñπÊ≥ïÔºå‰ª•ÊîπÂñÑÊÄßËÉΩ„ÄÇ ‰æãÂ¶ÇÔºå (new \\yii\\db\\Query())->from(\'user\')->limit(1)->one()„ÄÇ', '2', '1443004455', '1', 'somuchfun@gmail.com', 'www.wj.com', '39', '1');
INSERT INTO `comment` VALUES ('90', '‰º†ËØ¥‰∏≠ÁöÑÊ≤ôÂèë', '2', '1443004561', '1', 'lsf@ggoc.com', 'www.wj.com', '34', '1');
INSERT INTO `comment` VALUES ('91', 'ÂΩì‰Ω†Âú®Ë∞ÉÁî® yii\\db\\Query::all() ÊñπÊ≥ïÊó∂ÔºåÂÆÉÂ∞ÜËøîÂõû‰∏Ä‰∏™‰ª•ËøûÁª≠ÁöÑÊï¥ÂûãÊï∞ÂÄº‰∏∫Á¥¢ÂºïÁöÑÊï∞ÁªÑ„ÄÇ ËÄåÊúâÊó∂ÂÄô‰Ω†ÂèØËÉΩÂ∏åÊúõ‰ΩøÁî®‰∏Ä‰∏™ÁâπÂÆöÁöÑÂ≠óÊÆµÊàñËÄÖË°®ËææÂºèÁöÑÂÄºÊù•‰Ωú‰∏∫Á¥¢ÂºïÁªìÊûúÈõÜÊï∞ÁªÑ„ÄÇÈÇ£‰πà‰Ω†ÂèØ‰ª•Âú®Ë∞ÉÁî® yii\\db\\Query::all() ‰πãÂâç‰ΩøÁî® yii\\db\\Query::indexBy() ÊñπÊ≥ïÊù•ËææÂà∞Ëøô‰∏™ÁõÆÁöÑ„ÄÇ', '2', '1443047988', '1', 'ctq@qq.com', 'www.wj.com', '39', '1');
INSERT INTO `comment` VALUES ('92', 'Â¶ÇÈúÄ‰ΩøÁî®Ë°®ËææÂºèÁöÑÂÄºÂÅö‰∏∫Á¥¢ÂºïÔºåÈÇ£‰πàÂè™ÈúÄË¶Å‰º†ÈÄí‰∏Ä‰∏™ÂåøÂêçÂáΩÊï∞Áªô yii\\db\\Query::indexBy() ÊñπÊ≥ïÂç≥ÂèØ', '2', '1443049673', '1', 'kiki@qq.com', 'www.wj.com', '36', '1');
INSERT INTO `comment` VALUES ('93', 'yii\\db\\Query::one() ÊñπÊ≥ïÂè™ËøîÂõûÊü•ËØ¢ÁªìÊûúÂΩì‰∏≠ÁöÑÁ¨¨‰∏ÄÊù°Êï∞ÊçÆÔºå Êù°‰ª∂ËØ≠Âè•‰∏≠‰∏ç‰ºöÂä†‰∏ä LIMIT 1 Êù°', '2', '1443927141', '2', 'csc@bing.com', 'www.wj.com', '39', '1');
INSERT INTO `comment` VALUES ('94', '‰Ω†Â∫îËØ•Âú® ÂìçÂ∫îÊ†ºÂºè ÈÉ®ÂàÜ‰∏≠ËøáÊª§ÊéâËøô‰∫õÂ≠óÊÆµ„ÄÇ', '1', '1444267750', '1', 'wj@163.com', 'www.wj.com', '36', '1');
INSERT INTO `comment` VALUES ('95', 'ÈÄÇÂêàÁî®Â∏∏ËßÑÊ†ºÂºèÊòæÁ§∫‰∏Ä‰∏™Ê®°ÂûãÔºà‰æãÂ¶ÇÂú®‰∏Ä‰∏™Ë°®Ê†ºÁöÑ‰∏ÄË°å‰∏≠ÊòæÁ§∫Ê®°ÂûãÁöÑÊØè‰∏™Â±ûÊÄßÔºâ„ÄÇ', '2', '1444377054', '1', 'tester@example.com', 'www.baidu.com', '36', '1');
INSERT INTO `comment` VALUES ('96', 'È≠èËÄÅÂ∏àÔºåÁúã‰∫Ü‰Ω†ÁöÑËßÜÈ¢ëÊ∑±ÂÖ•ÊµÖÂá∫ÔºåÂèóÁõäÂå™ÊµÖ„ÄÇÁúüÁöÑÈùûÂ∏∏ÈùûÂ∏∏ÊÑüË∞¢ÊÇ®ÔºÅ', '2', '1479353395', '2', 'mchael@163.com', 'www.wj.com', '35', '1');
INSERT INTO `comment` VALUES ('97', 'ËÄÅÂ∏àÊùÉÈôêÊéßÂà∂ËÆ≤ÁöÑÂæàÂ•ΩÔºåÊÉ≥Âê¨ËÄÅÂ∏àËÆ≤‰∏ã ÁÆ°ÁêÜÂëòÊìç‰ΩúÊó•ÂøóÂíåÊï∞ÊçÆÂ∫ìÂ§á‰ªΩ', '2', '1479353438', '2', 'mchael@163.com', 'www.wj.com', '35', '1');
INSERT INTO `comment` VALUES ('98', 'È≠èËÄÅÂ∏à,Áúã‰∫Ü‰Ω†ÁöÑËßÜÈ¢ëÂ≠¶Âà∞‰∫ÜÂæàÂ§ö,ÁúüÂøÉ‰∏çÈîô.Âí±‰ª¨ËøôÂ•óËßÜÈ¢ëÂ≠¶ÂÆå,ÊúâÁî®Êà∑ÊêúÁ¥¢ÊñáÁ´†ÁöÑÂäüËÉΩ‰πà?', '2', '1479353455', '2', 'mchael@163.com', 'www.wj.com', '42', '1');
INSERT INTO `comment` VALUES ('99', 'È≠èËÄÅÂ∏àÔºåÁúã‰∫Ü‰Ω†ÁöÑËßÜÈ¢ëÊ∑±ÂÖ•ÊµÖÂá∫ÔºåÂèóÁõäÂå™ÊµÖ„ÄÇÁúüÁöÑÈùûÂ∏∏ÈùûÂ∏∏ÊÑüË∞¢ÊÇ®ÔºÅ', '1', '1479353617', '2', 'mchael@163.com', 'www.wj.com', '42', '1');
INSERT INTO `comment` VALUES ('100', ' ÁÇπËµûÔºåÂ≠¶ÁîüËá™Â≠¶ÂÖöÔºåÂÆûÊàòËØæÁ®ãÂú®ÂæàÂ§öÁΩëÁ´ôÈÉΩË¶ÅÈí±„ÄÇ', '1', '1479364784', '2', 'mchael@163.com', 'www.wj.com', '42', '1');
INSERT INTO `comment` VALUES ('101', 'ÊãçÊâãÁß∞Âø´', '1', '1528084576', '1', 'weixi@weixistyle.com', null, '37', '1');
INSERT INTO `comment` VALUES ('102', 'Â§ßÂ§ßÂ§ßÂ§ßÂ§ßÂ§ßÂ§ßÂ§ßÂ§ßÂ§ßÂ§ßÂ§ßÂ§ß', '1', '1528189955', '1', 'weixi@weixistyle.com', null, '36', '0');
INSERT INTO `commentstatus` VALUES ('1', 'ÂæÖÂÆ°Ê†∏', '1');
INSERT INTO `commentstatus` VALUES ('2', 'Â∑≤ÂÆ°Ê†∏', '2');
INSERT INTO `migration` VALUES ('m000000_000000_base', '1527497975');
INSERT INTO `migration` VALUES ('m130524_201442_init', '1527497980');
INSERT INTO `post` VALUES ('35', 'Active Record ËØ¶Ëß£Ôºà‰∏ãÔºâ', '<div id=\"content\">\r\n\r\n<h2>ARÁöÑÁîüÂëΩÂë®Êúü</h2>\r\n<p>ÁêÜËß£ARÁöÑÁîüÂëΩÂë®ÊúüÂØπ‰∫é‰Ω†Êìç‰ΩúÊï∞ÊçÆÂ∫ìÈùûÂ∏∏ÈáçË¶Å„ÄÇÁîüÂëΩÂë®ÊúüÈÄöÂ∏∏ÈÉΩ‰ºöÊúâ‰∫õÂÖ∏ÂûãÁöÑ‰∫ã‰ª∂Â≠òÂú®„ÄÇÂØπ‰∫éÂºÄÂèëARÁöÑbehaviorsÊù•ËØ¥ÈùûÂ∏∏ÊúâÁî®„ÄÇ</p>\r\n<p>ÂΩì‰Ω†ÂÆû‰æãÂåñ‰∏Ä‰∏™Êñ∞ÁöÑARÂØπË±°Êó∂ÔºåÊàë‰ª¨Â∞ÜËé∑ÂæóÂ¶Ç‰∏ãÁöÑÁîüÂëΩÂë®ÊúüÔºö</p>\r\n<ol><li>constructor</li>\r\n<li>yii\\db\\ActiveRecord::init(): ‰ºöËß¶Âèë‰∏Ä‰∏™ yii\\db\\ActiveRecord::EVENT_INIT ‰∫ã‰ª∂</li>\r\n</ol><p>ÂΩì‰Ω†ÈÄöËøá yii\\db\\ActiveRecord::find() ÊñπÊ≥ïÊü•ËØ¢Êï∞ÊçÆÊó∂ÔºåÊØè‰∏™ARÂÆû‰æãÈÉΩÂ∞ÜÊúâ‰ª•‰∏ãÁîüÂëΩÂë®ÊúüÔºö</p>\r\n<ol><li>constructor</li>\r\n<li>yii\\db\\ActiveRecord::init(): ‰ºöËß¶Âèë‰∏Ä‰∏™ yii\\db\\ActiveRecord::EVENT_INIT ‰∫ã‰ª∂</li>\r\n<li>yii\\db\\ActiveRecord::afterFind(): ‰ºöËß¶Âèë‰∏Ä‰∏™ yii\\db\\ActiveRecord::EVENT_AFTER_FIND ‰∫ã‰ª∂</li>\r\n</ol><p>ÂΩìÈÄöËøá yii\\db\\ActiveRecord::save() ÊñπÊ≥ïÂÜôÂÖ•ÊàñËÄÖÊõ¥Êñ∞Êï∞ÊçÆÊó∂, Êàë‰ª¨Â∞ÜËé∑ÂæóÂ¶Ç‰∏ãÁîüÂëΩÂë®ÊúüÔºö</p>\r\n<ol><li>yii\\db\\ActiveRecord::beforeValidate(): ‰ºöËß¶Âèë‰∏Ä‰∏™ yii\\db\\ActiveRecord::EVENT_BEFORE_VALIDATE ‰∫ã‰ª∂</li>\r\n<li>yii\\db\\ActiveRecord::afterValidate(): ‰ºöËß¶Âèë‰∏Ä‰∏™ yii\\db\\ActiveRecord::EVENT_AFTER_VALIDATE ‰∫ã‰ª∂</li>\r\n<li>yii\\db\\ActiveRecord::beforeSave(): ‰ºöËß¶Âèë‰∏Ä‰∏™ yii\\db\\ActiveRecord::EVENT_BEFORE_INSERT Êàñ yii\\db\\ActiveRecord::EVENT_BEFORE_UPDATE ‰∫ã‰ª∂</li>\r\n<li>ÊâßË°åÂÆûÈôÖÁöÑÊï∞ÊçÆÂÜôÂÖ•ÊàñÊõ¥Êñ∞</li>\r\n<li>yii\\db\\ActiveRecord::afterSave(): ‰ºöËß¶Âèë‰∏Ä‰∏™ yii\\db\\ActiveRecord::EVENT_AFTER_INSERT Êàñ yii\\db\\ActiveRecord::EVENT_AFTER_UPDATE ‰∫ã‰ª∂</li>\r\n</ol><p>ÊúÄÂêéÔºåÂΩìË∞ÉÁî® yii\\db\\ActiveRecord::delete() Âà†Èô§Êï∞ÊçÆÊó∂, Êàë‰ª¨Â∞ÜËé∑ÂæóÂ¶Ç‰∏ãÁîüÂëΩÂë®ÊúüÔºö</p>\r\n<ol><li>yii\\db\\ActiveRecord::beforeDelete(): ‰ºöËß¶Âèë‰∏Ä‰∏™ yii\\db\\ActiveRecord::EVENT_BEFORE_DELETE ‰∫ã‰ª∂</li>\r\n<li>ÊâßË°åÂÆûÈôÖÁöÑÊï∞ÊçÆÂà†Èô§</li>\r\n<li>yii\\db\\ActiveRecord::afterDelete(): ‰ºöËß¶Âèë‰∏Ä‰∏™ yii\\db\\ActiveRecord::EVENT_AFTER_DELETE ‰∫ã‰ª∂</li>\r\n</ol><h2>Êü•ËØ¢ÂÖ≥ËÅîÁöÑÊï∞ÊçÆ</h2>\r\n<p>‰ΩøÁî® AR ÊñπÊ≥ï‰πüÂèØ‰ª•Êü•ËØ¢Êï∞ÊçÆË°®ÁöÑÂÖ≥ËÅîÊï∞ÊçÆÔºàÂ¶ÇÔºåÈÄâÂá∫Ë°®AÁöÑÊï∞ÊçÆÂèØ‰ª•ÊãâÂá∫Ë°®BÁöÑÂÖ≥ËÅîÊï∞ÊçÆÔºâ„ÄÇ\r\nÊúâ‰∫Ü ARÔºå\r\nËøîÂõûÁöÑÂÖ≥ËÅîÊï∞ÊçÆËøûÊé•Â∞±ÂÉèËøûÊé•ÂÖ≥ËÅî‰∏ªË°®ÁöÑ AR ÂØπË±°ÁöÑÂ±ûÊÄß‰∏ÄÊ†∑„ÄÇ</p>\r\n<p>Âª∫Á´ãÂÖ≥ËÅîÂÖ≥Á≥ªÂêéÔºåÈÄöËøá <code>$customer-&gt;orders</code> ÂèØ‰ª•Ëé∑Âèñ\r\n‰∏Ä‰∏™ <code>Order</code> ÂØπË±°ÁöÑÊï∞ÁªÑÔºåËØ•Êï∞ÁªÑ‰ª£Ë°®ÂΩìÂâçÂÆ¢Êà∑ÂØπË±°ÁöÑËÆ¢ÂçïÈõÜ„ÄÇ</p>\r\n<p>ÂÆö‰πâÂÖ≥ËÅîÂÖ≥Á≥ª‰ΩøÁî®‰∏Ä‰∏™ÂèØ‰ª•ËøîÂõû yii\\db\\ActiveQuery ÂØπË±°ÁöÑ getter ÊñπÊ≥ïÔºå\r\nyii\\db\\ActiveQueryÂØπË±°ÊúâÂÖ≥ËÅî‰∏ä‰∏ãÊñáÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØÔºåÂõ†Ê≠§ÂèØ‰ª•Âè™Êü•ËØ¢ÂÖ≥ËÅîÊï∞ÊçÆ„ÄÇ</p>\r\n<p>‰æãÂ¶ÇÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Customer</span> <span class=\"hljs-keyword\">extends</span> \\<span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">db</span>\\<span class=\"hljs-title\">ActiveRecord</span>\r\n</span>{\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getOrders</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-comment\">// ÂÆ¢Êà∑ÂíåËÆ¢ÂçïÈÄöËøá Order.customer_id -&gt; id ÂÖ≥ËÅîÂª∫Á´ã‰∏ÄÂØπÂ§öÂÖ≥Á≥ª</span>\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$this</span>-&gt;hasMany(Order::className(), [<span class=\"hljs-string\">\'customer_id\'</span> =&gt; <span class=\"hljs-string\">\'id\'</span>]);\r\n    }\r\n}\r\n\r\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Order</span> <span class=\"hljs-keyword\">extends</span> \\<span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">db</span>\\<span class=\"hljs-title\">ActiveRecord</span>\r\n</span>{\r\n    <span class=\"hljs-comment\">// ËÆ¢ÂçïÂíåÂÆ¢Êà∑ÈÄöËøá Customer.id -&gt; customer_id ÂÖ≥ËÅîÂª∫Á´ã‰∏ÄÂØπ‰∏ÄÂÖ≥Á≥ª</span>\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getCustomer</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$this</span>-&gt;hasOne(Customer::className(), [<span class=\"hljs-string\">\'id\'</span> =&gt; <span class=\"hljs-string\">\'customer_id\'</span>]);\r\n    }\r\n}\r\n</code></pre>\r\n<p>‰ª•‰∏ä‰ΩøÁî®‰∫Ü yii\\db\\ActiveRecord::hasMany() Âíå yii\\db\\ActiveRecord::hasOne() ÊñπÊ≥ï„ÄÇ\r\n‰ª•‰∏ä‰∏§‰æãÂàÜÂà´ÊòØÂÖ≥ËÅîÊï∞ÊçÆÂ§öÂØπ‰∏ÄÂÖ≥Á≥ªÂíå‰∏ÄÂØπ‰∏ÄÂÖ≥Á≥ªÁöÑÂª∫Ê®°ËåÉ‰æã„ÄÇ\r\nÂ¶ÇÔºå‰∏Ä‰∏™ÂÆ¢Êà∑ÊúâÂæàÂ§öËÆ¢ÂçïÔºå‰∏Ä‰∏™ËÆ¢ÂçïÂè™ÂΩíÂ±û‰∏Ä‰∏™ÂÆ¢Êà∑„ÄÇ\r\n‰∏§‰∏™ÊñπÊ≥ïÈÉΩÊúâ‰∏§‰∏™ÂèÇÊï∞Âπ∂ËøîÂõû yii\\db\\ActiveQuery ÂØπË±°„ÄÇ</p>\r\n<ul><li><code>$class</code>ÔºöÂÖ≥ËÅîÊ®°ÂûãÁ±ªÂêçÔºåÂÆÉÂøÖÈ°ªÊòØ‰∏Ä‰∏™ÂÆåÂÖ®ÂêàÊ†ºÁöÑÁ±ªÂêç„ÄÇ</li>\r\n<li><code>$link</code>: ‰∏§‰∏™Ë°®ÁöÑÂÖ≥ËÅîÂàóÔºåÂ∫î‰∏∫ÈîÆÂÄºÂØπÊï∞ÁªÑÁöÑÂΩ¢Âºè„ÄÇ\r\nÊï∞ÁªÑÁöÑÈîÆÊòØ <code>$class</code> ÂÖ≥ËÅîË°®ÁöÑÂàóÂêçÔºå\r\nËÄåÊï∞ÁªÑÂÄºÊòØÂÖ≥ËÅîÁ±ª $class ÁöÑÂàóÂêç„ÄÇ\r\nÂü∫‰∫éË°®Â§ñÈîÆÂÆö‰πâÂÖ≥ËÅîÂÖ≥Á≥ªÊòØÊúÄ‰Ω≥ÊñπÊ≥ï„ÄÇ</li>\r\n</ul><p>Âª∫Á´ãÂÖ≥ËÅîÂÖ≥Á≥ªÂêéÔºåËé∑ÂèñÂÖ≥ËÅîÊï∞ÊçÆÂíåËé∑ÂèñÁªÑ‰ª∂Â±ûÊÄß‰∏ÄÊ†∑ÁÆÄÂçïÔºå\r\nÊâßË°å‰ª•‰∏ãÁõ∏Â∫îgetterÊñπÊ≥ïÂç≥ÂèØÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-comment\">// ÂèñÂæóÂÆ¢Êà∑ÁöÑËÆ¢Âçï</span>\r\n<span class=\"hljs-variable\">$customer</span> = Customer::findOne(<span class=\"hljs-number\">1</span>);\r\n<span class=\"hljs-variable\">$orders</span> = <span class=\"hljs-variable\">$customer</span>-&gt;orders; <span class=\"hljs-comment\">// $orders ÊòØ Order ÂØπË±°Êï∞ÁªÑ</span>\r\n</code></pre>\r\n<p>‰ª•‰∏ä‰ª£Á†ÅÂÆûÈôÖÊâßË°å‰∫Ü‰ª•‰∏ã‰∏§Êù° SQL ËØ≠Âè•Ôºö</p>\r\n<pre><code class=\"language-sql hljs\"><span class=\"hljs-operator\">SELECT * <span class=\"hljs-keyword\">FROM</span> customer <span class=\"hljs-keyword\">WHERE</span> <span class=\"hljs-keyword\">id</span>=<span class=\"hljs-number\">1</span>;</span>\r\n<span class=\"hljs-operator\">SELECT * <span class=\"hljs-keyword\">FROM</span> <span class=\"hljs-keyword\">order</span> <span class=\"hljs-keyword\">WHERE</span> customer_id=<span class=\"hljs-number\">1</span>;</span>\r\n</code></pre>\r\n<blockquote><p>ÊèêÁ§∫:ÂÜçÊ¨°Áî®Ë°®ËææÂºè <code>$customer-&gt;orders</code>Â∞Ü‰∏ç‰ºöÊâßË°åÁ¨¨‰∫åÊ¨° SQL Êü•ËØ¢Ôºå\r\nSQL Êü•ËØ¢Âè™Âú®ËØ•Ë°®ËææÂºèÁ¨¨‰∏ÄÊ¨°‰ΩøÁî®Êó∂ÊâßË°å„ÄÇ\r\nÊï∞ÊçÆÂ∫ìËÆøÈóÆÂè™ËøîÂõûÁºìÂ≠òÂú®ÂÜÖÈÉ®Ââç‰∏ÄÊ¨°ÂèñÂõûÁöÑÁªìÊûúÈõÜÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥Êü•ËØ¢Êñ∞ÁöÑ\r\nÂÖ≥ËÅîÊï∞ÊçÆÔºåÂÖàË¶ÅÊ≥®ÈîÄÁé∞ÊúâÁªìÊûúÈõÜÔºö<code>unset($customer-&gt;orders);</code>„ÄÇ</p>\r\n</blockquote>\r\n<p>ÊúâÊó∂ÂÄôÈúÄË¶ÅÂú®ÂÖ≥ËÅîÊü•ËØ¢‰∏≠‰º†ÈÄíÂèÇÊï∞ÔºåÂ¶Ç‰∏çÈúÄË¶ÅËøîÂõûÂÆ¢Êà∑ÂÖ®ÈÉ®ËÆ¢ÂçïÔºå\r\nÂè™ÈúÄË¶ÅËøîÂõûË¥≠‰π∞ÈáëÈ¢ùË∂ÖËøáËÆæÂÆöÂÄºÁöÑÂ§ßËÆ¢ÂçïÔºå\r\nÈÄöËøá‰ª•‰∏ãgetterÊñπÊ≥ïÂ£∞Êòé‰∏Ä‰∏™ÂÖ≥ËÅîÊï∞ÊçÆ <code>bigOrders</code> Ôºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Customer</span> <span class=\"hljs-keyword\">extends</span> \\<span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">db</span>\\<span class=\"hljs-title\">ActiveRecord</span>\r\n</span>{\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getBigOrders</span><span class=\"hljs-params\">(<span class=\"hljs-variable\">$threshold</span> = <span class=\"hljs-number\">100</span>)</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$this</span>-&gt;hasMany(Order::className(), [<span class=\"hljs-string\">\'customer_id\'</span> =&gt; <span class=\"hljs-string\">\'id\'</span>])\r\n            -&gt;where(<span class=\"hljs-string\">\'subtotal &gt; :threshold\'</span>, [<span class=\"hljs-string\">\':threshold\'</span> =&gt; <span class=\"hljs-variable\">$threshold</span>])\r\n            -&gt;orderBy(<span class=\"hljs-string\">\'id\'</span>);\r\n    }\r\n}\r\n</code></pre>\r\n<p><code>hasMany()</code> ËøîÂõû yii\\db\\ActiveQuery ÂØπË±°ÔºåËØ•ÂØπË±°ÂÖÅËÆ∏‰Ω†ÈÄöËøá\r\nyii\\db\\ActiveQuery ÊñπÊ≥ïÂÆöÂà∂Êü•ËØ¢„ÄÇ</p>\r\n<p>Â¶Ç‰∏äÂ£∞ÊòéÂêéÔºåÊâßË°å <code>$customer-&gt;bigOrders</code> Â∞±ËøîÂõû\r\nÊÄªÈ¢ùÂ§ß‰∫é100ÁöÑËÆ¢Âçï„ÄÇ‰ΩøÁî®‰ª•‰∏ã‰ª£Á†ÅÊõ¥ÊîπËÆæÂÆöÂÄºÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-variable\">$orders</span> = <span class=\"hljs-variable\">$customer</span>-&gt;getBigOrders(<span class=\"hljs-number\">200</span>)-&gt;all();\r\n</code></pre>\r\n<p>&gt;Ê≥®ÊÑèÔºöÂÖ≥ËÅîÊü•ËØ¢ËøîÂõûÁöÑÊòØ yii\\db\\ActiveQuery ÁöÑÂÆû‰æãÔºåÂ¶ÇÊûúÂÉèÁâπÊÄßÔºàÂ¶ÇÁ±ªÂ±ûÊÄßÔºâÈÇ£Ê†∑ËøûÊé•ÂÖ≥ËÅîÊï∞ÊçÆÔºå\r\nËøîÂõûÁöÑÁªìÊûúÊòØÂÖ≥ËÅîÊü•ËØ¢ÁöÑÁªìÊûúÔºåÂç≥ yii\\db\\ActiveRecord ÁöÑÂÆû‰æãÔºå\r\nÊàñËÄÖÊòØÊï∞ÁªÑÔºåÊàñËÄÖÊòØ null ÔºåÂèñÂÜ≥‰∫éÂÖ≥ËÅîÂÖ≥Á≥ªÁöÑÂ§öÊ†∑ÊÄß„ÄÇÂ¶ÇÔºå<code>$customer-&gt;getOrders()</code> ËøîÂõû\r\n<code>ActiveQuery</code> ÂÆû‰æãÔºåËÄå <code>$customer-&gt;orders</code> ËøîÂõû<code>Order</code> ÂØπË±°Êï∞ÁªÑ\r\nÔºàÂ¶ÇÊûúÊü•ËØ¢ÁªìÊûú‰∏∫Á©∫ÂàôËøîÂõûÁ©∫Êï∞ÁªÑÔºâ„ÄÇ</p>\r\n<h2>‰∏≠Èó¥ÂÖ≥ËÅîË°®</h2>\r\n<p>ÊúâÊó∂Ôºå‰∏§‰∏™Ë°®ÈÄöËøá‰∏≠Èó¥Ë°®ÂÖ≥ËÅîÔºåÂÆö‰πâËøôÊ†∑ÁöÑÂÖ≥ËÅîÂÖ≥Á≥ªÔºå ÂèØ‰ª•ÈÄöËøáË∞ÉÁî® yii\\db\\ActiveQuery::via() ÊñπÊ≥ïÊàñ yii\\db\\ActiveQuery::viaTable() ÊñπÊ≥ïÊù•ÂÆöÂà∂ yii\\db\\ActiveQuery ÂØπË±° „ÄÇ</p>\r\n<p>‰∏æ‰æãËÄåË®ÄÔºåÂ¶ÇÊûú <code>order</code> Ë°®Âíå <code>item</code> Ë°®ÈÄöËøá‰∏≠Èó¥Ë°® <code>order_item</code> ÂÖ≥ËÅîËµ∑Êù•Ôºå ÂèØ‰ª•Âú® <code>Order</code> Á±ªÂ£∞Êòé <code>items</code> ÂÖ≥ËÅîÂÖ≥Á≥ªÂèñ‰ª£‰∏≠Èó¥Ë°®Ôºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Order</span> <span class=\"hljs-keyword\">extends</span> \\<span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">db</span>\\<span class=\"hljs-title\">ActiveRecord</span>\r\n</span>{\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getItems</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$this</span>-&gt;hasMany(Item::className(), [<span class=\"hljs-string\">\'id\'</span> =&gt; <span class=\"hljs-string\">\'item_id\'</span>])\r\n            -&gt;viaTable(<span class=\"hljs-string\">\'order_item\'</span>, [<span class=\"hljs-string\">\'order_id\'</span> =&gt; <span class=\"hljs-string\">\'id\'</span>]);\r\n    }\r\n}\r\n</code></pre>\r\n<p>‰∏§‰∏™ÊñπÊ≥ïÊòØÁõ∏‰ººÁöÑÔºåÈô§‰∫Ü yii\\db\\ActiveQuery::via() ÊñπÊ≥ïÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØ‰ΩøÁî® AR Á±ª‰∏≠ÂÆö‰πâÁöÑÂÖ≥ËÅîÂêç„ÄÇ ‰ª•‰∏äÊñπÊ≥ïÂèñ‰ª£‰∫Ü‰∏≠Èó¥Ë°®ÔºåÁ≠â‰ª∑‰∫éÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Order</span> <span class=\"hljs-keyword\">extends</span> \\<span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">db</span>\\<span class=\"hljs-title\">ActiveRecord</span>\r\n</span>{\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getOrderItems</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$this</span>-&gt;hasMany(OrderItem::className(), [<span class=\"hljs-string\">\'order_id\'</span> =&gt; <span class=\"hljs-string\">\'id\'</span>]);\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getItems</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$this</span>-&gt;hasMany(Item::className(), [<span class=\"hljs-string\">\'id\'</span> =&gt; <span class=\"hljs-string\">\'item_id\'</span>])\r\n            -&gt;via(<span class=\"hljs-string\">\'orderItems\'</span>);\r\n    }\r\n}\r\n</code></pre>\r\n<h2>Âª∂ËøüÂä†ËΩΩÂíåÂç≥Êó∂Âä†ËΩΩÔºàÂèàÁß∞ÊÉ∞ÊÄßÂä†ËΩΩ‰∏éË¥™Â©™Âä†ËΩΩÔºâ</h2>\r\n<p>Â¶ÇÂâçÊâÄËø∞ÔºåÂΩì‰Ω†Á¨¨‰∏ÄÊ¨°ËøûÊé•ÂÖ≥ËÅîÂØπË±°Êó∂Ôºå AR Â∞ÜÊâßË°å‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÊü•ËØ¢ Êù•Ê£ÄÁ¥¢ËØ∑Ê±ÇÊï∞ÊçÆÂπ∂Â°´ÂÖÖÂà∞ÂÖ≥ËÅîÂØπË±°ÁöÑÁõ∏Â∫îÂ±ûÊÄß„ÄÇ Â¶ÇÊûúÂÜçÊ¨°ËøûÊé•Áõ∏ÂêåÁöÑÂÖ≥ËÅîÂØπË±°Ôºå‰∏çÂÜçÊâßË°å‰ªª‰ΩïÊü•ËØ¢ËØ≠Âè•ÔºåËøôÁßçÊï∞ÊçÆÂ∫ìÊü•ËØ¢ÁöÑÊâßË°åÊñπÊ≥ïÁß∞‰∏∫‚ÄúÂª∂ËøüÂä†ËΩΩ‚Äù„ÄÇÂ¶ÇÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-comment\">// SQL executed: SELECT * FROM customer WHERE id=1</span>\r\n<span class=\"hljs-variable\">$customer</span> = Customer::findOne(<span class=\"hljs-number\">1</span>);\r\n<span class=\"hljs-comment\">// SQL executed: SELECT * FROM order WHERE customer_id=1</span>\r\n<span class=\"hljs-variable\">$orders</span> = <span class=\"hljs-variable\">$customer</span>-&gt;orders;\r\n<span class=\"hljs-comment\">// Ê≤°Êúâ SQL ËØ≠Âè•Ë¢´ÊâßË°å</span>\r\n<span class=\"hljs-variable\">$orders2</span> = <span class=\"hljs-variable\">$customer</span>-&gt;orders; <span class=\"hljs-comment\">//ÂèñÂõû‰∏äÊ¨°Êü•ËØ¢ÁöÑÁºìÂ≠òÊï∞ÊçÆ</span>\r\n</code></pre>\r\n<p>Âª∂ËøüÂä†ËΩΩÈùûÂ∏∏ÂÆûÁî®Ôºå‰ΩÜÊòØÔºåÂú®‰ª•‰∏ãÂú∫ÊôØ‰∏≠‰ΩøÁî®Âª∂ËøüÂä†ËΩΩ‰ºöÈÅ≠ÈÅáÊÄßËÉΩÈóÆÈ¢òÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-comment\">// SQL executed: SELECT * FROM customer LIMIT 100</span>\r\n<span class=\"hljs-variable\">$customers</span> = Customer::find()-&gt;limit(<span class=\"hljs-number\">100</span>)-&gt;all();\r\n\r\n<span class=\"hljs-keyword\">foreach</span> (<span class=\"hljs-variable\">$customers</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-variable\">$customer</span>) {\r\n    <span class=\"hljs-comment\">// SQL executed: SELECT * FROM order WHERE customer_id=...</span>\r\n    <span class=\"hljs-variable\">$orders</span> = <span class=\"hljs-variable\">$customer</span>-&gt;orders;\r\n    <span class=\"hljs-comment\">// ...Â§ÑÁêÜ $orders...</span>\r\n}\r\n</code></pre>\r\n<p>ÂÅáËÆæÊï∞ÊçÆÂ∫ìÊü•Âá∫ÁöÑÂÆ¢Êà∑Ë∂ÖËøá100‰∏™Ôºå‰ª•‰∏ä‰ª£Á†ÅÂ∞ÜÊâßË°åÂ§öÂ∞ëÊù° SQL ËØ≠Âè•Ôºü 101 Êù°ÔºÅÁ¨¨‰∏ÄÊù° SQL Êü•ËØ¢ËØ≠Âè•ÂèñÂõû100‰∏™ÂÆ¢Êà∑ÔºåÁÑ∂ÂêéÔºå ÊØè‰∏™ÂÆ¢Êà∑Ë¶ÅÊâßË°å‰∏ÄÊù° SQL Êü•ËØ¢ËØ≠Âè•‰ª•ÂèñÂõûËØ•ÂÆ¢Êà∑ÁöÑÊâÄÊúâËÆ¢Âçï„ÄÇ</p>\r\n<p>‰∏∫Ëß£ÂÜ≥‰ª•‰∏äÊÄßËÉΩÈóÆÈ¢òÔºåÂèØ‰ª•ÈÄöËøáË∞ÉÁî® yii\\db\\ActiveQuery::with() ÊñπÊ≥ï‰ΩøÁî®Âç≥Êó∂Âä†ËΩΩËß£ÂÜ≥„ÄÇ</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-comment\">// SQL executed: SELECT * FROM customer LIMIT 100;</span>\r\n<span class=\"hljs-comment\">//               SELECT * FROM orders WHERE customer_id IN (1,2,...)</span>\r\n<span class=\"hljs-variable\">$customers</span> = Customer::find()-&gt;limit(<span class=\"hljs-number\">100</span>)\r\n    -&gt;with(<span class=\"hljs-string\">\'orders\'</span>)-&gt;all();\r\n\r\n<span class=\"hljs-keyword\">foreach</span> (<span class=\"hljs-variable\">$customers</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-variable\">$customer</span>) {\r\n    <span class=\"hljs-comment\">// Ê≤°Êúâ SQL ËØ≠Âè•Ë¢´ÊâßË°å</span>\r\n    <span class=\"hljs-variable\">$orders</span> = <span class=\"hljs-variable\">$customer</span>-&gt;orders;\r\n    <span class=\"hljs-comment\">// ...Â§ÑÁêÜ $orders...</span>\r\n}\r\n</code></pre>\r\n<p>Â¶Ç‰Ω†ÊâÄËßÅÔºåÂêåÊ†∑ÁöÑ‰ªªÂä°Âè™ÈúÄË¶Å‰∏§‰∏™ SQL ËØ≠Âè•„ÄÇ\r\n&gt;È°ªÁü•ÔºöÈÄöÂ∏∏ÔºåÂç≥Êó∂Âä†ËΩΩ N ‰∏™ÂÖ≥ËÅîÂÖ≥Á≥ªËÄåÈÄöËøá via() ÊàñËÄÖ viaTable() ÂÆö‰πâ‰∫Ü M ‰∏™ÂÖ≥ËÅîÂÖ≥Á≥ªÔºå Â∞ÜÊúâ 1+M+N Êù° SQL Êü•ËØ¢ËØ≠Âè•Ë¢´ÊâßË°åÔºö‰∏Ä‰∏™Êü•ËØ¢ÂèñÂõû‰∏ªË°®Ë°åÊï∞Ôºå ‰∏Ä‰∏™Êü•ËØ¢ÁªôÊØè‰∏Ä‰∏™ (M) ‰∏≠Èó¥Ë°®Ôºå‰∏Ä‰∏™Êü•ËØ¢ÁªôÊØè‰∏™ (N) ÂÖ≥ËÅîË°®„ÄÇ\r\nÊ≥®ÊÑè:ÂΩìÁî®Âç≥Êó∂Âä†ËΩΩÂÆöÂà∂ select() Êó∂ÔºåÁ°Æ‰øùËøûÊé• Âà∞ÂÖ≥ËÅîÊ®°ÂûãÁöÑÂàóÈÉΩË¢´ÂåÖÊã¨‰∫ÜÔºåÂê¶ÂàôÔºåÂÖ≥ËÅîÊ®°Âûã‰∏ç‰ºöËΩΩÂÖ•„ÄÇÂ¶ÇÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-variable\">$orders</span> = Order::find()-&gt;select([<span class=\"hljs-string\">\'id\'</span>, <span class=\"hljs-string\">\'amount\'</span>])-&gt;with(<span class=\"hljs-string\">\'customer\'</span>)-&gt;all();\r\n<span class=\"hljs-comment\">// $orders[0]-&gt;customer ÊÄªÊòØÁ©∫ÁöÑÔºå‰ΩøÁî®‰ª•‰∏ã‰ª£Á†ÅËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºö</span>\r\n<span class=\"hljs-variable\">$orders</span> = Order::find()-&gt;select([<span class=\"hljs-string\">\'id\'</span>, <span class=\"hljs-string\">\'amount\'</span>, <span class=\"hljs-string\">\'customer_id\'</span>])-&gt;with(<span class=\"hljs-string\">\'customer\'</span>)-&gt;all();\r\n</code></pre>\r\n<p>ÊúâÊó∂ÂÄôÔºå‰Ω†ÊÉ≥Ëá™Áî±ÁöÑËá™ÂÆö‰πâÂÖ≥ËÅîÊü•ËØ¢ÔºåÂª∂ËøüÂä†ËΩΩÂíåÂç≥Êó∂Âä†ËΩΩÈÉΩÂèØ‰ª•ÂÆûÁé∞ÔºåÂ¶ÇÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-variable\">$customer</span> = Customer::findOne(<span class=\"hljs-number\">1</span>);\r\n<span class=\"hljs-comment\">// Âª∂ËøüÂä†ËΩΩ: SELECT * FROM order WHERE customer_id=1 AND subtotal&gt;100</span>\r\n<span class=\"hljs-variable\">$orders</span> = <span class=\"hljs-variable\">$customer</span>-&gt;getOrders()-&gt;where(<span class=\"hljs-string\">\'subtotal&gt;100\'</span>)-&gt;all();\r\n\r\n<span class=\"hljs-comment\">// Âç≥Êó∂Âä†ËΩΩ: SELECT * FROM customer LIMIT 100</span>\r\n<span class=\"hljs-comment\">//          SELECT * FROM order WHERE customer_id IN (1,2,...) AND subtotal&gt;100</span>\r\n<span class=\"hljs-variable\">$customers</span> = Customer::find()-&gt;limit(<span class=\"hljs-number\">100</span>)-&gt;with([\r\n    <span class=\"hljs-string\">\'orders\'</span> =&gt; <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">(<span class=\"hljs-variable\">$query</span>)</span> </span>{\r\n        <span class=\"hljs-variable\">$query</span>-&gt;andWhere(<span class=\"hljs-string\">\'subtotal&gt;100\'</span>);\r\n    },\r\n])-&gt;all();\r\n</code></pre>\r\n<h2>ÈÄÜÂÖ≥Á≥ª</h2>\r\n<p>ÂÖ≥ËÅîÂÖ≥Á≥ªÈÄöÂ∏∏ÊàêÂØπÂÆö‰πâÔºåÂ¶ÇÔºöCustomer ÂèØ‰ª•Êúâ‰∏™Âêç‰∏∫ orders ÂÖ≥ËÅîÈ°πÔºå ËÄå Order ‰πüÊúâ‰∏™Âêç‰∏∫customer ÁöÑÂÖ≥ËÅîÈ°πÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Customer</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">ActiveRecord</span>\r\n</span>{\r\n    ....\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getOrders</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$this</span>-&gt;hasMany(Order::className(), [<span class=\"hljs-string\">\'customer_id\'</span> =&gt; <span class=\"hljs-string\">\'id\'</span>]);\r\n    }\r\n}\r\n\r\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Order</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">ActiveRecord</span>\r\n</span>{\r\n    ....\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getCustomer</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$this</span>-&gt;hasOne(Customer::className(), [<span class=\"hljs-string\">\'id\'</span> =&gt; <span class=\"hljs-string\">\'customer_id\'</span>]);\r\n    }\r\n}\r\n</code></pre>\r\n<p>Â¶ÇÊûúÊàë‰ª¨ÊâßË°å‰ª•‰∏ãÊü•ËØ¢ÔºåÂèØ‰ª•ÂèëÁé∞ËÆ¢ÂçïÁöÑ customer Âíå ÊâæÂà∞Ëøô‰∫õËÆ¢ÂçïÁöÑÂÆ¢Êà∑ÂØπË±°Âπ∂‰∏çÊòØÂêå‰∏Ä‰∏™„ÄÇËøûÊé• customer-&gt;orders Â∞ÜËß¶Âèë‰∏ÄÊù° SQL ËØ≠Âè• ËÄåËøûÊé•‰∏Ä‰∏™ËÆ¢ÂçïÁöÑ customer Â∞ÜËß¶ÂèëÂè¶‰∏ÄÊù° SQL ËØ≠Âè•„ÄÇ</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-comment\">// SELECT * FROM customer WHERE id=1</span>\r\n<span class=\"hljs-variable\">$customer</span> = Customer::findOne(<span class=\"hljs-number\">1</span>);\r\n<span class=\"hljs-comment\">// ËæìÂá∫ \"‰∏çÁõ∏Âêå\"</span>\r\n<span class=\"hljs-comment\">// SELECT * FROM order WHERE customer_id=1</span>\r\n<span class=\"hljs-comment\">// SELECT * FROM customer WHERE id=1</span>\r\n<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$customer</span>-&gt;orders[<span class=\"hljs-number\">0</span>]-&gt;customer === <span class=\"hljs-variable\">$customer</span>) {\r\n    <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">\'Áõ∏Âêå\'</span>;\r\n} <span class=\"hljs-keyword\">else</span> {\r\n    <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">\'‰∏çÁõ∏Âêå\'</span>;\r\n}\r\n</code></pre>\r\n<p>‰∏∫ÈÅøÂÖçÂ§ö‰ΩôÊâßË°åÁöÑÂêé‰∏ÄÊù°ËØ≠Âè•ÔºåÊàë‰ª¨ÂèØ‰ª•‰∏∫ customerÊàñ orders ÂÖ≥ËÅîÂÖ≥Á≥ªÂÆö‰πâÁõ∏ÂèçÁöÑÂÖ≥ËÅîÂÖ≥Á≥ªÔºåÈÄöËøáË∞ÉÁî® yii\\db\\ActiveQuery::inverseOf() ÊñπÊ≥ïÂèØ‰ª•ÂÆûÁé∞„ÄÇ</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Customer</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">ActiveRecord</span>\r\n</span>{\r\n    ....\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getOrders</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$this</span>-&gt;hasMany(Order::className(), [<span class=\"hljs-string\">\'customer_id\'</span> =&gt; <span class=\"hljs-string\">\'id\'</span>])-&gt;inverseOf(<span class=\"hljs-string\">\'customer\'</span>);\r\n    }\r\n}\r\n</code></pre>\r\n<p>Áé∞Âú®Êàë‰ª¨ÂêåÊ†∑ÊâßË°å‰∏äÈù¢ÁöÑÊü•ËØ¢ÔºåÊàë‰ª¨Â∞ÜÂæóÂà∞Ôºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-comment\">// SELECT * FROM customer WHERE id=1</span>\r\n<span class=\"hljs-variable\">$customer</span> = Customer::findOne(<span class=\"hljs-number\">1</span>);\r\n<span class=\"hljs-comment\">// ËæìÂá∫Áõ∏Âêå</span>\r\n<span class=\"hljs-comment\">// SELECT * FROM order WHERE customer_id=1</span>\r\n<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$customer</span>-&gt;orders[<span class=\"hljs-number\">0</span>]-&gt;customer === <span class=\"hljs-variable\">$customer</span>) {\r\n    <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">\'Áõ∏Âêå\'</span>;\r\n} <span class=\"hljs-keyword\">else</span> {\r\n    <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">\'‰∏çÁõ∏Âêå\'</span>;\r\n}\r\n</code></pre>\r\n<p>‰ª•‰∏äÊàë‰ª¨Â±ïÁ§∫‰∫ÜÂ¶Ç‰ΩïÂú®Âª∂ËøüÂä†ËΩΩ‰∏≠‰ΩøÁî®Áõ∏ÂØπÂÖ≥ËÅîÂÖ≥Á≥ªÔºå Áõ∏ÂØπÂÖ≥Á≥ª‰πüÂèØ‰ª•Áî®Âú®Âç≥Êó∂Âä†ËΩΩ‰∏≠Ôºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-comment\">// SELECT * FROM customer</span>\r\n<span class=\"hljs-comment\">// SELECT * FROM order WHERE customer_id IN (1, 2, ...)</span>\r\n<span class=\"hljs-variable\">$customers</span> = Customer::find()-&gt;with(<span class=\"hljs-string\">\'orders\'</span>)-&gt;all();\r\n<span class=\"hljs-comment\">// ËæìÂá∫Áõ∏Âêå</span>\r\n<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$customers</span>[<span class=\"hljs-number\">0</span>]-&gt;orders[<span class=\"hljs-number\">0</span>]-&gt;customer === <span class=\"hljs-variable\">$customers</span>[<span class=\"hljs-number\">0</span>]) {\r\n    <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">\'Áõ∏Âêå\'</span>;\r\n} <span class=\"hljs-keyword\">else</span> {\r\n    <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">\'‰∏çÁõ∏Âêå\'</span>;\r\n}\r\n</code></pre>\r\n<p>&gt;Ê≥®ÊÑè:Áõ∏ÂØπÂÖ≥Á≥ª‰∏çËÉΩÂú®ÂåÖÂê´‰∏≠Èó¥Ë°®ÁöÑÂÖ≥ËÅîÂÖ≥Á≥ª‰∏≠ÂÆö‰πâ„ÄÇ Âç≥ÊòØÔºåÂ¶ÇÊûú‰Ω†ÁöÑÂÖ≥Á≥ªÊòØÈÄöËøáyii\\db\\ActiveQuery::via() Êàñ yii\\db\\ActiveQuery::viaTable()ÊñπÊ≥ïÂÆö‰πâÁöÑÔºå Â∞±‰∏çËÉΩË∞ÉÁî®yii\\db\\ActiveQuery::inverseOf()ÊñπÊ≥ï‰∫Ü„ÄÇ</p>\r\n<h2> JOIN Á±ªÂûãÂÖ≥ËÅîÊü•ËØ¢</h2>\r\n<p>‰ΩøÁî®ÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÊó∂ÔºåÊôÆÈÅçË¶ÅÂÅöÁöÑÊòØËøûÊé•Â§ö‰∏™Ë°®Âπ∂ÊòéÁ°ÆÂú∞ËøêÁî®ÂêÑÁßç JOIN Êü•ËØ¢„ÄÇ\r\nJOIN SQLËØ≠Âè•ÁöÑÊü•ËØ¢Êù°‰ª∂ÂíåÂèÇÊï∞Ôºå‰ΩøÁî® yii\\db\\ActiveQuery::joinWith()\r\nÂèØ‰ª•ÈáçÁî®Â∑≤ÂÆö‰πâÂÖ≥Á≥ªÂπ∂Ë∞ÉÁî®\r\nËÄå‰∏çÊòØ‰ΩøÁî® yii\\db\\ActiveQuery::join() Êù•ÂÆûÁé∞ÁõÆÊ†á„ÄÇ</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-comment\">// Êü•ÊâæÊâÄÊúâËÆ¢ÂçïÂπ∂‰ª•ÂÆ¢Êà∑ ID ÂíåËÆ¢Âçï ID ÊéíÂ∫èÔºåÂπ∂Ë¥™Â©™Âä†ËΩΩ \"customer\" Ë°®</span>\r\n<span class=\"hljs-variable\">$orders</span> = Order::find()-&gt;joinWith(<span class=\"hljs-string\">\'customer\'</span>)-&gt;orderBy(<span class=\"hljs-string\">\'customer.id, order.id\'</span>)-&gt;all();\r\n<span class=\"hljs-comment\">// Êü•ÊâæÂåÖÊã¨‰π¶Á±çÁöÑÊâÄÊúâËÆ¢ÂçïÔºåÂπ∂‰ª• `INNER JOIN` ÁöÑËøûÊé•ÊñπÂºèÂç≥Êó∂Âä†ËΩΩ \"books\" Ë°®</span>\r\n<span class=\"hljs-variable\">$orders</span> = Order::find()-&gt;innerJoinWith(<span class=\"hljs-string\">\'books\'</span>)-&gt;all();\r\n</code></pre>\r\n<p>‰ª•‰∏äÔºåÊñπÊ≥ï yii\\db\\ActiveQuery::innerJoinWith() ÊòØËÆøÈóÆ <code>INNER JOIN</code> Á±ªÂûãÁöÑ  yii\\db\\ActiveQuery::joinWith() ÁöÑÂø´Êç∑ÊñπÂºè„ÄÇ</p>\r\n<p>ÂèØ‰ª•ËøûÊé•‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂÖ≥ËÅîÂÖ≥Á≥ªÔºåÂèØ‰ª•Ëá™Áî±‰ΩøÁî®Êü•ËØ¢Êù°‰ª∂Âà∞ÂÖ≥ËÅîÊü•ËØ¢Ôºå\r\n‰πüÂèØ‰ª•ÂµåÂ•óËøûÊé•ÂÖ≥ËÅîÊü•ËØ¢„ÄÇÂ¶ÇÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-comment\">// ËøûÊé•Â§öÈáçÂÖ≥Á≥ª</span>\r\n<span class=\"hljs-comment\">// ÊâæÂá∫24Â∞èÊó∂ÂÜÖÊ≥®ÂÜåÂÆ¢Êà∑ÂåÖÂê´‰π¶Á±çÁöÑËÆ¢Âçï</span>\r\n<span class=\"hljs-variable\">$orders</span> = Order::find()-&gt;innerJoinWith([\r\n    <span class=\"hljs-string\">\'books\'</span>,\r\n    <span class=\"hljs-string\">\'customer\'</span> =&gt; <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-params\">(<span class=\"hljs-variable\">$query</span>)</span> </span>{\r\n        <span class=\"hljs-variable\">$query</span>-&gt;where(<span class=\"hljs-string\">\'customer.created_at &gt; \'</span> . (time() - <span class=\"hljs-number\">24</span> * <span class=\"hljs-number\">3600</span>));\r\n    }\r\n])-&gt;all();\r\n<span class=\"hljs-comment\">// ËøûÊé•ÂµåÂ•óÂÖ≥Á≥ªÔºöËøûÊé• books Ë°®ÂèäÂÖ∂ author Âàó</span>\r\n<span class=\"hljs-variable\">$orders</span> = Order::find()-&gt;joinWith(<span class=\"hljs-string\">\'books.author\'</span>)-&gt;all();\r\n</code></pre>\r\n<p>‰ª£Á†ÅËÉåÂêéÔºå Yii ÂÖàÊâßË°å‰∏ÄÊù° JOIN SQL ËØ≠Âè•ÊääÊª°Ë∂≥ JOIN SQL ËØ≠Âè•Êü•ËØ¢Êù°‰ª∂ÁöÑ‰∏ªË¶ÅÊ®°ÂûãÊü•Âá∫Ôºå\r\nÁÑ∂Âêé‰∏∫ÊØè‰∏™ÂÖ≥Á≥ªÊâßË°å‰∏ÄÊù°Êü•ËØ¢ËØ≠Âè•Ôºå\r\nbingÂ°´ÂÖÖÁõ∏Â∫îÁöÑÂÖ≥ËÅîËÆ∞ÂΩï„ÄÇ</p>\r\n<p>yii\\db\\ActiveQuery::joinWith() Âíå  yii\\db\\ActiveQuery::with() ÁöÑÂå∫Âà´ÊòØ\r\nÂâçËÄÖËøûÊé•‰∏ªÊ®°ÂûãÁ±ªÂíåÂÖ≥ËÅîÊ®°ÂûãÁ±ªÁöÑÊï∞ÊçÆË°®Êù•Ê£ÄÁ¥¢‰∏ªÊ®°ÂûãÔºå\r\nËÄåÂêéËÄÖÂè™Êü•ËØ¢ÂíåÊ£ÄÁ¥¢‰∏ªÊ®°ÂûãÁ±ª„ÄÇ\r\nÊ£ÄÁ¥¢‰∏ªÊ®°Âûã</p>\r\n<p>Áî±‰∫éËøô‰∏™Âå∫Âà´Ôºå‰Ω†ÂèØ‰ª•Â∫îÁî®Âè™ÈíàÂØπ‰∏ÄÊù° JOIN SQL ËØ≠Âè•Ëµ∑ÊïàÁöÑÊü•ËØ¢Êù°‰ª∂„ÄÇ\r\nÂ¶ÇÔºåÈÄöËøáÂÖ≥ËÅîÊ®°ÂûãÁöÑÊü•ËØ¢Êù°‰ª∂ËøáÊª§‰∏ªÊ®°ÂûãÔºåÂ¶ÇÂâç‰æãÔºå\r\nÂèØ‰ª•‰ΩøÁî®ÂÖ≥ËÅîË°®ÁöÑÂàóÊù•ÊåëÈÄâ‰∏ªÊ®°ÂûãÊï∞ÊçÆÔºå</p>\r\n<p>ÂΩì‰ΩøÁî® yii\\db\\ActiveQuery::joinWith() ÊñπÊ≥ïÊó∂ÂèØ‰ª•ÂìçÂ∫îÊ≤°ÊúâÊ≠ß‰πâÁöÑÂàóÂêç„ÄÇ\r\nIn the above examples, we use <code>item.id</code> and <code>order.id</code> to disambiguate the <code>id</code> column references\r\nÂõ†‰∏∫ËÆ¢ÂçïË°®ÂíåÈ°πÁõÆË°®ÈÉΩÂåÖÊã¨ <code>id</code> Âàó„ÄÇ</p>\r\n<p>ÂΩìËøûÊé•ÂÖ≥ËÅîÂÖ≥Á≥ªÊó∂ÔºåÂÖ≥ËÅîÂÖ≥Á≥ªÈªòËÆ§‰ΩøÁî®Âç≥Êó∂Âä†ËΩΩ„ÄÇ‰Ω†ÂèØ‰ª•\r\nÈÄöËøá‰º†ÂèÇÊï∞ <code>$eagerLoading</code> Êù•ÂÜ≥ÂÆöÂú®ÊåáÂÆöÂÖ≥ËÅîÊü•ËØ¢‰∏≠ÊòØÂê¶‰ΩøÁî®Âç≥Êó∂Âä†ËΩΩ„ÄÇ</p>\r\n<p>ÈªòËÆ§ yii\\db\\ActiveQuery::joinWith() ‰ΩøÁî®Â∑¶ËøûÊé•Êù•ËøûÊé•ÂÖ≥ËÅîË°®„ÄÇ\r\n‰Ω†‰πüÂèØ‰ª•‰º† <code>$joinType</code> ÂèÇÊï∞Êù•ÂÆöÂà∂ËøûÊé•Á±ªÂûã„ÄÇ\r\n‰Ω†‰πüÂèØ‰ª•‰ΩøÁî® yii\\db\\ActiveQuery::innerJoinWith()„ÄÇ</p>\r\n<p>‰ª•‰∏ãÊòØ <code>INNER JOIN</code> ÁöÑÁÆÄÁü≠‰æãÂ≠êÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-comment\">// Êü•ÊâæÂåÖÊã¨‰π¶Á±çÁöÑÊâÄÊúâËÆ¢ÂçïÔºå‰ΩÜ \"books\" Ë°®‰∏ç‰ΩøÁî®Âç≥Êó∂Âä†ËΩΩ</span>\r\n<span class=\"hljs-variable\">$orders</span> = Order::find()-&gt;innerJoinWith(<span class=\"hljs-string\">\'books\'</span>, <span class=\"hljs-keyword\">false</span>)-&gt;all();\r\n<span class=\"hljs-comment\">// Á≠â‰ª∑‰∫éÔºö</span>\r\n<span class=\"hljs-variable\">$orders</span> = Order::find()-&gt;joinWith(<span class=\"hljs-string\">\'books\'</span>, <span class=\"hljs-keyword\">false</span>, <span class=\"hljs-string\">\'INNER JOIN\'</span>)-&gt;all();\r\n</code></pre>\r\n<p>ÊúâÊó∂ËøûÊé•‰∏§‰∏™Ë°®Êó∂ÔºåÈúÄË¶ÅÂú®ÂÖ≥ËÅîÊü•ËØ¢ÁöÑ ON ÈÉ®ÂàÜÊåáÂÆöÈ¢ùÂ§ñÊù°‰ª∂„ÄÇ\r\nËøôÂèØ‰ª•ÈÄöËøáË∞ÉÁî® yii\\db\\ActiveQuery::onCondition() ÊñπÊ≥ïÂÆûÁé∞Ôºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">User</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">ActiveRecord</span>\r\n</span>{\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getBooks</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$this</span>-&gt;hasMany(Item::className(), [<span class=\"hljs-string\">\'owner_id\'</span> =&gt; <span class=\"hljs-string\">\'id\'</span>])-&gt;onCondition([<span class=\"hljs-string\">\'category_id\'</span> =&gt; <span class=\"hljs-number\">1</span>]);\r\n    }\r\n}\r\n</code></pre>\r\n<p>Âú®‰∏äÈù¢Ôºå yii\\db\\ActiveRecord::hasMany() ÊñπÊ≥ïÂõû‰º†‰∫Ü‰∏Ä‰∏™ yii\\db\\ActiveQuery ÂØπË±°Ôºå\r\nÂΩì‰Ω†Áî® yii\\db\\ActiveQuery::joinWith() ÊâßË°å‰∏ÄÊù°Êü•ËØ¢Êó∂ÔºåÂèñÂÜ≥‰∫éÊ≠£Ë¢´Ë∞ÉÁî®ÁöÑÊòØÂì™‰∏™ yii\\db\\ActiveQuery::onCondition()Ôºå\r\nËøîÂõû <code>category_id</code> ‰∏∫ 1 ÁöÑ items </p>\r\n<p>ÂΩì‰Ω†Áî® yii\\db\\ActiveQuery::joinWith() ËøõË°å‰∏ÄÊ¨°Êü•ËØ¢Êó∂Ôºå‚Äúon-condition‚ÄùÊù°‰ª∂‰ºöË¢´ÊîæÁΩÆÂú®Áõ∏Â∫îÊü•ËØ¢ËØ≠Âè•ÁöÑ ON ÈÉ®ÂàÜÔºå\r\nÂ¶ÇÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-comment\">// SELECT user.* FROM user LEFT JOIN item ON item.owner_id=user.id AND category_id=1</span>\r\n<span class=\"hljs-comment\">// SELECT * FROM item WHERE owner_id IN (...) AND category_id=1</span>\r\n<span class=\"hljs-variable\">$users</span> = User::find()-&gt;joinWith(<span class=\"hljs-string\">\'books\'</span>)-&gt;all();\r\n</code></pre>\r\n<p>Ê≥®ÊÑèÔºöÂ¶ÇÊûúÈÄöËøá yii\\db\\ActiveQuery::with() ËøõË°åË¥™Â©™Âä†ËΩΩÊàñ‰ΩøÁî®ÊÉ∞ÊÄßÂä†ËΩΩÁöÑËØùÔºåÂàô on Êù°‰ª∂‰ºöË¢´ÊîæÁΩÆÂú®ÂØπÂ∫î SQLËØ≠Âè•ÁöÑ <code>WHERE</code> ÈÉ®ÂàÜ„ÄÇ\r\nÂõ†‰∏∫ÔºåÊ≠§Êó∂Ê≠§Â§ÑÂπ∂Ê≤°ÊúâÂèëÁîü JOIN Êü•ËØ¢„ÄÇÊØîÂ¶ÇÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-comment\">// SELECT * FROM user WHERE id=10</span>\r\n<span class=\"hljs-variable\">$user</span> = User::findOne(<span class=\"hljs-number\">10</span>);\r\n<span class=\"hljs-comment\">// SELECT * FROM item WHERE owner_id=10 AND category_id=1</span>\r\n<span class=\"hljs-variable\">$books</span> = <span class=\"hljs-variable\">$user</span>-&gt;books;\r\n</code></pre>\r\n<h2>ÂÖ≥ËÅîË°®Êìç‰Ωú</h2>\r\n<p>AR Êèê‰æõ‰∫Ü‰∏ãÈù¢‰∏§‰∏™ÊñπÊ≥ïÁî®Êù•Âª∫Á´ãÂíåËß£Èô§‰∏§‰∏™ÂÖ≥ËÅîÂØπË±°‰πãÈó¥ÁöÑÂÖ≥Á≥ªÔºö</p>\r\n<ul><li>yii\\db\\ActiveRecord::link()</li>\r\n<li>yii\\db\\ActiveRecord::unlink()</li>\r\n</ul><p>‰æãÂ¶ÇÔºåÁªôÂÆö‰∏Ä‰∏™customerÂíåorderÂØπË±°ÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøá‰∏ãÈù¢ÁöÑ‰ª£Á†Å‰ΩøÂæócustomerÂØπË±°Êã•ÊúâorderÂØπË±°Ôºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-variable\">$customer</span> = Customer::findOne(<span class=\"hljs-number\">1</span>);\r\n<span class=\"hljs-variable\">$order</span> = <span class=\"hljs-keyword\">new</span> Order();\r\n<span class=\"hljs-variable\">$order</span>-&gt;subtotal = <span class=\"hljs-number\">100</span>;\r\n<span class=\"hljs-variable\">$customer</span>-&gt;link(<span class=\"hljs-string\">\'orders\'</span>, <span class=\"hljs-variable\">$order</span>);\r\n</code></pre>\r\n<p>yii\\db\\ActiveRecord::link() Ë∞ÉÁî®‰∏äËø∞Â∞ÜËÆæÁΩÆ customer_id ÁöÑÈ°∫Â∫èÊòØ $customer ÁöÑ‰∏ªÈîÆÂÄºÔºåÁÑ∂ÂêéË∞ÉÁî® yii\\db\\ActiveRecord::save() Ë¶ÅÂ∞ÜÈ°∫Â∫è‰øùÂ≠òÂà∞Êï∞ÊçÆÂ∫ì‰∏≠„ÄÇ</p>\r\n<h2>‰ΩúÁî®Âüü</h2>\r\n<p>ÂΩì‰Ω†Ë∞ÉÁî®yii\\db\\ActiveRecord::find() Êàñ yii\\db\\ActiveRecord::findBySql()ÊñπÊ≥ïÊó∂ÔºåÂ∞Ü‰ºöËøîÂõû‰∏Ä‰∏™yii\\db\\ActiveQueryÂÆû‰æã„ÄÇ‰πãÂêéÔºå‰Ω†ÂèØ‰ª•Ë∞ÉÁî®ÂÖ∂‰ªñÊü•ËØ¢ÊñπÊ≥ïÔºåÂ¶Ç yii\\db\\ActiveQuery::where()Ôºåyii\\db\\ActiveQuery::orderBy(), Ëøõ‰∏ÄÊ≠•ÁöÑÊåáÂÆöÊü•ËØ¢Êù°‰ª∂„ÄÇ</p>\r\n<p>ÊúâÊó∂ÂÄô‰Ω†ÂèØËÉΩÈúÄË¶ÅÂú®‰∏çÂêåÁöÑÂú∞Êñπ‰ΩøÁî®Áõ∏ÂêåÁöÑÊü•ËØ¢ÊñπÊ≥ï„ÄÇÂ¶ÇÊûúÂá∫Áé∞ËøôÁßçÊÉÖÂÜµÔºå‰Ω†Â∫îËØ•ËÄÉËôëÂÆö‰πâÊâÄË∞ìÁöÑ‰ΩúÁî®Âüü„ÄÇ‰ΩúÁî®ÂüüÊòØÊú¨Ë¥®‰∏äË¶ÅÊ±Ç‰∏ÄÁªÑÁöÑÊü•ËØ¢ÊñπÊ≥ïÊù•‰øÆÊîπÊü•ËØ¢ÂØπË±°ÁöÑËá™ÂÆö‰πâÊü•ËØ¢Á±ª‰∏≠ÂÆö‰πâÁöÑÊñπÊ≥ï„ÄÇ ‰πãÂêé‰Ω†Â∞±ÂèØ‰ª•ÂÉè‰ΩøÁî®ÊôÆÈÄöÊñπÊ≥ï‰∏ÄÊ†∑‰ΩøÁî®‰ΩúÁî®Âüü„ÄÇ</p>\r\n<p>Âè™ÈúÄ‰∏§Ê≠•Âç≥ÂèØÂÆö‰πâ‰∏Ä‰∏™‰ΩúÁî®Âüü„ÄÇÈ¶ñÂÖàÁªô‰Ω†ÁöÑmodelÂàõÂª∫‰∏Ä‰∏™Ëá™ÂÆö‰πâÁöÑÊü•ËØ¢Á±ªÔºåÂú®Ê≠§Á±ª‰∏≠ÂÆö‰πâÁöÑÊâÄÈúÄÁöÑËåÉÂõ¥ÊñπÊ≥ï„ÄÇ‰æãÂ¶ÇÔºåÁªôCommentÊ®°ÂûãÂàõÂª∫‰∏Ä‰∏™ CommentQueryÁ±ªÔºåÁÑ∂ÂêéÂú®CommentQueryÁ±ª‰∏≠ÂÆö‰πâ‰∏Ä‰∏™active()ÁöÑÊñπÊ≥ï‰∏∫‰ΩúÁî®ÂüüÔºåÂÉè‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title\">app</span>\\<span class=\"hljs-title\">models</span>;\r\n\r\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">db</span>\\<span class=\"hljs-title\">ActiveQuery</span>;\r\n\r\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">CommentQuery</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">ActiveQuery</span>\r\n</span>{\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">active</span><span class=\"hljs-params\">(<span class=\"hljs-variable\">$state</span> = true)</span>\r\n    </span>{\r\n        <span class=\"hljs-variable\">$this</span>-&gt;andWhere([<span class=\"hljs-string\">\'active\'</span> =&gt; <span class=\"hljs-variable\">$state</span>]);\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$this</span>;\r\n    }\r\n}\r\n</code></pre>\r\n<p>ÈáçÁÇπ:</p>\r\n<ol><li>Á±ªÂøÖÈ°ªÁªßÊâø yii\\db\\ActiveQuery (ÊàñËÄÖÊòØÂÖ∂‰ªñÁöÑ ActiveQuery ÔºåÊØîÂ¶Ç yii\\mongodb\\ActiveQuery)„ÄÇ</li>\r\n<li>ÂøÖÈ°ªÊòØ‰∏Ä‰∏™publicÁ±ªÂûãÁöÑÊñπÊ≥ï‰∏îÂøÖÈ°ªËøîÂõû $this ÂÆûÁé∞ÈìæÂºèÊìç‰Ωú„ÄÇÂèØ‰ª•‰º†ÂÖ•ÂèÇÊï∞„ÄÇ</li>\r\n<li>Ê£ÄÊü• yii\\db\\ActiveQuery ÂØπ‰∫é‰øÆÊîπÊü•ËØ¢Êù°‰ª∂ÊòØÈùûÂ∏∏ÊúâÁî®ÁöÑÊñπÊ≥ï„ÄÇ</li>\r\n</ol><p>ÂÖ∂Ê¨°ÔºåË¶ÜÁõñyii\\db\\ActiveRecord::find() ÊñπÊ≥ï‰ΩøÂÖ∂ËøîÂõûËá™ÂÆö‰πâÁöÑÊü•ËØ¢ÂØπË±°ËÄå‰∏çÊòØÂ∏∏ËßÑÁöÑyii\\db\\ActiveQuery„ÄÇÂØπ‰∫é‰∏äËø∞‰æãÂ≠êÔºå‰Ω†ÈúÄË¶ÅÁºñÂÜôÂ¶Ç‰∏ã‰ª£Á†ÅÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title\">app</span>\\<span class=\"hljs-title\">models</span>;\r\n\r\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">db</span>\\<span class=\"hljs-title\">ActiveRecord</span>;\r\n\r\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Comment</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">ActiveRecord</span>\r\n</span>{\r\n    <span class=\"hljs-comment\">/**\r\n     * <span class=\"hljs-doctag\">@inheritdoc</span>\r\n     * <span class=\"hljs-doctag\">@return</span> CommentQuery\r\n     */</span>\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">find</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> CommentQuery(get_called_class());\r\n    }\r\n}\r\n</code></pre>\r\n<p>Â∞±ËøôÊ†∑ÔºåÁé∞Âú®‰Ω†ÂèØ‰ª•‰ΩøÁî®Ëá™ÂÆö‰πâÁöÑ‰ΩúÁî®ÂüüÊñπÊ≥ï‰∫ÜÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-variable\">$comments</span> = Comment::find()-&gt;active()-&gt;all();\r\n<span class=\"hljs-variable\">$inactiveComments</span> = Comment::find()-&gt;active(<span class=\"hljs-keyword\">false</span>)-&gt;all();\r\n</code></pre>\r\n<p>‰Ω†‰πüËÉΩÂú®ÂÆö‰πâÁöÑÂÖ≥ËÅîÈáå‰ΩøÁî®‰ΩúÁî®ÂüüÊñπÊ≥ïÔºåÊØîÂ¶ÇÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Post</span> <span class=\"hljs-keyword\">extends</span> \\<span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">db</span>\\<span class=\"hljs-title\">ActiveRecord</span>\r\n</span>{\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getActiveComments</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$this</span>-&gt;hasMany(Comment::className(), [<span class=\"hljs-string\">\'post_id\'</span> =&gt; <span class=\"hljs-string\">\'id\'</span>])-&gt;active();\r\n\r\n    }\r\n}\r\n</code></pre>\r\n<p>ÊàñËÄÖÂú®ÊâßË°åÂÖ≥ËÅîÊü•ËØ¢ÁöÑÊó∂ÂÄô‰ΩøÁî®Ôºàon-the-fly ÊòØÂï•ÔºüÔºâÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-variable\">$posts</span> = Post::find()-&gt;with([\r\n    <span class=\"hljs-string\">\'comments\'</span> =&gt; <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">(<span class=\"hljs-variable\">$q</span>)</span> </span>{\r\n        <span class=\"hljs-variable\">$q</span>-&gt;active();\r\n    }\r\n])-&gt;all();\r\n</code></pre>\r\n<h3>ÈªòËÆ§‰ΩúÁî®Âüü</h3>\r\n<p>Â¶ÇÊûú‰Ω†‰πãÂâçÁî®Ëøá Yii 1.1 Â∞±Â∫îËØ•Áü•ÈÅìÈªòËÆ§‰ΩúÁî®ÂüüÁöÑÊ¶ÇÂøµ„ÄÇ‰∏Ä‰∏™ÈªòËÆ§ÁöÑ‰ΩúÁî®ÂüüÂèØ‰ª•‰ΩúÁî®‰∫éÊâÄÊúâÊü•ËØ¢„ÄÇ‰Ω†ÂèØ‰ª•ÂæàÂÆπÊòìÁöÑÈÄöËøáÈáçÂÜôyii\\db\\ActiveRecord::find()ÊñπÊ≥ïÊù•ÂÆö‰πâ‰∏Ä‰∏™ÈªòËÆ§‰ΩúÁî®ÂüüÔºå‰æãÂ¶ÇÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">find</span><span class=\"hljs-params\">()</span>\r\n</span>{\r\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">parent</span>::find()-&gt;where([<span class=\"hljs-string\">\'deleted\'</span> =&gt; <span class=\"hljs-keyword\">false</span>]);\r\n}\r\n</code></pre>\r\n<p>Ê≥®ÊÑèÔºå‰Ω†‰πãÂêéÊâÄÊúâÁöÑÊü•ËØ¢ÈÉΩ‰∏çËÉΩÁî® yii\\db\\ActiveQuery::where()Ôºå‰ΩÜÊòØÂèØ‰ª•Áî® yii\\db\\ActiveQuery::andWhere() Âíå yii\\db\\ActiveQuery::orWhere()Ôºå‰ªñ‰ª¨‰∏ç‰ºöË¶ÜÁõñÊéâÈªòËÆ§‰ΩúÁî®Âüü„ÄÇÔºàËØëÊ≥®ÔºöÂ¶ÇÊûú‰Ω†Ë¶Å‰ΩøÁî®ÈªòËÆ§‰ΩúÁî®ÂüüÔºåÂ∞±‰∏çËÉΩÂú® xxx::find()Âêé‰ΩøÁî®where()ÊñπÊ≥ïÔºå‰Ω†ÂøÖÈ°ª‰ΩøÁî®andXXX()ÊàñËÄÖorXXX()Á≥ªÁöÑÊñπÊ≥ïÔºåÂê¶ÂàôÈªòËÆ§‰ΩúÁî®Âüü‰∏ç‰ºöËµ∑ÊïàÊûúÔºåËá≥‰∫éÂéüÂõ†ÔºåÊâìÂºÄwhere()ÊñπÊ≥ïÁöÑ‰ª£Á†Å‰∏ÄÁúã‰æøÁü•Ôºâ</p>\r\n<h2>‰∫ãÂä°Êìç‰Ωú</h2>\r\n<p>ÂΩìÊâßË°åÂá†‰∏™Áõ∏ÂÖ≥ËÅîÁöÑÊï∞ÊçÆÂ∫ìÊìç‰ΩúÁöÑÊó∂ÂÄô</p>\r\n<p>TODO: FIXME: WIP, TBD, <a href=\"https://github.com/yiisoft/yii2/issues/226\">https://github.com/yiisoft/yii2/issues/226</a></p>\r\n<p>, yii\\db\\ActiveRecord::afterSave(), yii\\db\\ActiveRecord::beforeDelete() and/or yii\\db\\ActiveRecord::afterDelete() ÁîüÂëΩÂë®ÊúüÂë®ÊúüÊñπÊ≥ï(life cycle methods ÊàëËßâÂæóËøôÂè•ÁøªËØëÊàê‚ÄúÊ®°ÊùøÊñπÊ≥ï‚Äù‰ºö‰∏ç‰ºöÊõ¥Â•ΩÁÇπÔºü)„ÄÇÂºÄÂèëËÄÖÂèØ‰ª•ÈÄöËøáÈáçÂÜôyii\\db\\ActiveRecord::save()ÊñπÊ≥ïÁÑ∂ÂêéÂú®ÊéßÂà∂Âô®Èáå‰ΩøÁî®‰∫ãÂä°Êìç‰ΩúÔºå‰∏•Ê†ºÂú∞ËØ¥ÊòØ‰ºº‰πé‰∏çÊòØ‰∏Ä‰∏™Â•ΩÁöÑÂÅöÊ≥ï ÔºàÂè¨Âõû\"Áò¶ÊéßÂà∂Âô® / ËÇ•Ê®°Âûã\"Âü∫Êú¨ËßÑÂàôÔºâ„ÄÇ</p>\r\n<p>Ëøô‰∫õÊñπÊ≥ïÂú®ËøôÈáå(Â¶ÇÊûú‰Ω†‰∏çÊòéÁôΩËá™Â∑±ÂÆûÈôÖÂú®Âπ≤‰ªÄ‰πàÔºåËØ∑‰∏çË¶Å‰ΩøÁî®‰ªñ‰ª¨)ÔºåModelsÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Feature</span> <span class=\"hljs-keyword\">extends</span> \\<span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">db</span>\\<span class=\"hljs-title\">ActiveRecord</span>\r\n</span>{\r\n    <span class=\"hljs-comment\">// ...</span>\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getProduct</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$this</span>-&gt;hasOne(Product::className(), [<span class=\"hljs-string\">\'id\'</span> =&gt; <span class=\"hljs-string\">\'product_id\'</span>]);\r\n    }\r\n}\r\n\r\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Product</span> <span class=\"hljs-keyword\">extends</span> \\<span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">db</span>\\<span class=\"hljs-title\">ActiveRecord</span>\r\n</span>{\r\n    <span class=\"hljs-comment\">// ...</span>\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getFeatures</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$this</span>-&gt;hasMany(Feature::className(), [<span class=\"hljs-string\">\'product_id\'</span> =&gt; <span class=\"hljs-string\">\'id\'</span>]);\r\n    }\r\n}\r\n</code></pre>\r\n<p>ÈáçÂÜô yii\\db\\ActiveRecord::save() ÊñπÊ≥ïÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">ProductController</span> <span class=\"hljs-keyword\">extends</span> \\<span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">web</span>\\<span class=\"hljs-title\">Controller</span>\r\n</span>{\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">actionCreate</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-comment\">// <span class=\"hljs-doctag\">FIXME:</span> <span class=\"hljs-doctag\">TODO:</span> WIP, TBD</span>\r\n    }\r\n}\r\n</code></pre>\r\n<p>(ËØëÊ≥®ÔºöÊàëËßâÂæó‰∏äÈù¢Â∫îËØ•ÊòØÂéüÊâãÂÜåÈáåÁöÑbug)</p>\r\n<p>Âú®ÊéßÂà∂Âô®Â±Ç‰ΩøÁî®‰∫ãÂä°Ôºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">ProductController</span> <span class=\"hljs-keyword\">extends</span> \\<span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">web</span>\\<span class=\"hljs-title\">Controller</span>\r\n</span>{\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">actionCreate</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-comment\">// <span class=\"hljs-doctag\">FIXME:</span> <span class=\"hljs-doctag\">TODO:</span> WIP, TBD</span>\r\n    }\r\n}\r\n</code></pre>\r\n<p>‰Ωú‰∏∫Ëøô‰∫õËÑÜÂº±ÊñπÊ≥ïÁöÑÊõø‰ª£Ôºå‰Ω†Â∫îËØ•‰ΩøÁî®ÂéüÂ≠êÊìç‰ΩúÊñπÊ°àÁâπÊÄß„ÄÇ</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Feature</span> <span class=\"hljs-keyword\">extends</span> \\<span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">db</span>\\<span class=\"hljs-title\">ActiveRecord</span>\r\n</span>{\r\n    <span class=\"hljs-comment\">// ...</span>\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getProduct</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$this</span>-&gt;hasOne(Product::className(), [<span class=\"hljs-string\">\'product_id\'</span> =&gt; <span class=\"hljs-string\">\'id\'</span>]);\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">scenarios</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">return</span> [\r\n            <span class=\"hljs-string\">\'userCreates\'</span> =&gt; [\r\n                <span class=\"hljs-string\">\'attributes\'</span> =&gt; [<span class=\"hljs-string\">\'name\'</span>, <span class=\"hljs-string\">\'value\'</span>],\r\n                <span class=\"hljs-string\">\'atomic\'</span> =&gt; [<span class=\"hljs-keyword\">self</span>::OP_INSERT],\r\n            ],\r\n        ];\r\n    }\r\n}\r\n\r\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Product</span> <span class=\"hljs-keyword\">extends</span> \\<span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">db</span>\\<span class=\"hljs-title\">ActiveRecord</span>\r\n</span>{\r\n    <span class=\"hljs-comment\">// ...</span>\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getFeatures</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$this</span>-&gt;hasMany(Feature::className(), [<span class=\"hljs-string\">\'id\'</span> =&gt; <span class=\"hljs-string\">\'product_id\'</span>]);\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">scenarios</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">return</span> [\r\n            <span class=\"hljs-string\">\'userCreates\'</span> =&gt; [\r\n                <span class=\"hljs-string\">\'attributes\'</span> =&gt; [<span class=\"hljs-string\">\'title\'</span>, <span class=\"hljs-string\">\'price\'</span>],\r\n                <span class=\"hljs-string\">\'atomic\'</span> =&gt; [<span class=\"hljs-keyword\">self</span>::OP_INSERT],\r\n            ],\r\n        ];\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">afterValidate</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">parent</span>::afterValidate();\r\n        <span class=\"hljs-comment\">// <span class=\"hljs-doctag\">FIXME:</span> <span class=\"hljs-doctag\">TODO:</span> WIP, TBD</span>\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">afterSave</span><span class=\"hljs-params\">(<span class=\"hljs-variable\">$insert</span>)</span>\r\n    </span>{\r\n        <span class=\"hljs-keyword\">parent</span>::afterSave(<span class=\"hljs-variable\">$insert</span>);\r\n        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$this</span>-&gt;getScenario() === <span class=\"hljs-string\">\'userCreates\'</span>) {\r\n            <span class=\"hljs-comment\">// <span class=\"hljs-doctag\">FIXME:</span> <span class=\"hljs-doctag\">TODO:</span> WIP, TBD</span>\r\n        }\r\n    }\r\n}\r\n</code></pre>\r\n<p>ControllerÈáåÁöÑ‰ª£Á†ÅÂ∞ÜÂèòÂæóÂæàÁÆÄÊ¥ÅÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">ProductController</span> <span class=\"hljs-keyword\">extends</span> \\<span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">web</span>\\<span class=\"hljs-title\">Controller</span>\r\n</span>{\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">actionCreate</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-comment\">// <span class=\"hljs-doctag\">FIXME:</span> <span class=\"hljs-doctag\">TODO:</span> WIP, TBD</span>\r\n    }\r\n}\r\n</code></pre>\r\n<p>ÊéßÂà∂Âô®ÈùûÂ∏∏ÁÆÄÊ¥ÅÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">ProductController</span> <span class=\"hljs-keyword\">extends</span> \\<span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">web</span>\\<span class=\"hljs-title\">Controller</span>\r\n</span>{\r\n    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">actionCreate</span><span class=\"hljs-params\">()</span>\r\n    </span>{\r\n        <span class=\"hljs-comment\">// <span class=\"hljs-doctag\">FIXME:</span> <span class=\"hljs-doctag\">TODO:</span> WIP, TBD</span>\r\n    }\r\n}\r\n</code></pre>\r\n<h2>‰πêËßÇÈîÅÔºàOptimistic LocksÔºâ</h2>\r\n<p>TODO</p>\r\n<h2>Ë¢´Ê±°ÊüìÂ±ûÊÄß</h2>\r\n<p>ÂΩì‰Ω†Ë∞ÉÁî®yii\\db\\ActiveRecord::save()Áî®‰∫é‰øùÂ≠òÊ¥ªÂä®ËÆ∞ÂΩï(Active Record)ÂÆû‰æãÊó∂,Âè™ÊúâË¢´Ê±°ÊüìÁöÑÂ±ûÊÄßÊâç‰ºöË¢´‰øùÂ≠ò„ÄÇ‰∏Ä‰∏™Â±ûÊÄßÊòØÂê¶ËÆ§ÂÆö‰∏∫Ë¢´Ê±°ÊüìÂèñÂÜ≥‰∫éÂÆÉÁöÑÂÄºËá™‰ªéÊúÄÂêé‰∏ÄÊ¨°‰ªéÊï∞ÊçÆÂ∫ìÂä†ËΩΩÊàñËÄÖÊúÄËøë‰∏ÄÊ¨°‰øùÂ≠òÂà∞Êï∞ÊçÆÂ∫ìÂêéÂà∞Áé∞Âú®ÊòØÂê¶Ë¢´‰øÆÊîπËøá„ÄÇÊ≥®ÊÑè:Êó†ËÆ∫Ê¥ªÂä®ËÆ∞ÂΩï(Active Record)ÊòØÂê¶ÊúâË¢´Ê±°ÊüìÂ±ûÊÄßÔºåÊï∞ÊçÆÈ™åËØÅÂßãÁªà‰ºöÊâßË°å„ÄÇ</p>\r\n<p>Ê¥ªÂä®ËÆ∞ÂΩï(Active Record)‰ºöËá™Âä®Áª¥Êä§‰∏Ä‰∏™Ê±°ÊüìÊï∞ÊçÆÂàóË°®„ÄÇÂÆÉÁöÑÂ∑•‰ΩúÊñπÂºèÊòØÈÄöËøáÁª¥Êä§‰∏Ä‰∏™ËæÉÊóßÂ±ûÊÄßÂÄºÁâàÊú¨ÔºåÂπ∂‰∏îÂ∞ÜÂÆÉ‰ª¨‰∏éÊúÄÊñ∞ÁöÑËøõË°åÊØîËæÉ„ÄÇ‰Ω†ÂèØ‰ª•ÈÄöËøáË∞ÉÁî®yii\\db\\ActiveRecord::getDirtyAttributes()Êù•Ëé∑ÂèñÂΩìÂâçÁöÑÊ±°ÊüìÂ±ûÊÄß„ÄÇ‰Ω†‰πüÂèØ‰ª•Ë∞ÉÁî®yii\\db\\ActiveRecord::markAttributeDirty()Êù•ÊòæÁ§∫ÁöÑÊ†áËÆ∞‰∏Ä‰∏™Â±ûÊÄß‰∏∫Ê±°ÊüìÂ±ûÊÄß„ÄÇ</p>\r\n<p>Â¶ÇÊûú‰Ω†ÂØπÊúÄËøë‰∏ÄÊ¨°‰øÆÊîπÂâçÁöÑÂ±ûÊÄßÂÄºÊÑüÂÖ¥Ë∂£Ôºå‰Ω†ÂèØ‰ª•Ë∞ÉÁî®yii\\db\\ActiveRecord::getOldAttributes() Êàñ yii\\db\\ActiveRecord::getOldAttribute()„ÄÇ</p>\r\n<h2>Âè¶ËßÅ</h2>\r\n<ul><li><a href=\"/doc/guide/2.0/model\">Ê®°ÂûãÔºàModelÔºâ</a></li>\r\n<li>yii\\db\\ActiveRecord</li>\r\n</ul>		</div>', 'Yii2,ActiveRecord', '2', '1443000262', '1443000294', '1');
INSERT INTO `post` VALUES ('36', 'DetailView', '<div id=\"content\">\r\n\r\n<p>yii\\widgets\\DetailView Â∞èÈÉ®‰ª∂ÊòæÁ§∫ÁöÑÊòØÂçï‰∏Ä yii\\widgets\\DetailView::$model Êï∞ÊçÆÁöÑËØ¶ÊÉÖ„ÄÇ</p>\r\n<p>ÂÆÉÈùûÂ∏∏ÈÄÇÂêàÁî®Â∏∏ËßÑÊ†ºÂºèÊòæÁ§∫‰∏Ä‰∏™Ê®°ÂûãÔºà‰æãÂ¶ÇÂú®‰∏Ä‰∏™Ë°®Ê†ºÁöÑ‰∏ÄË°å‰∏≠ÊòæÁ§∫Ê®°ÂûãÁöÑÊØè‰∏™Â±ûÊÄßÔºâ„ÄÇ\r\nËøôÈáåËØ¥ÁöÑÊ®°ÂûãÂèØ‰ª•ÊòØ \\yii\\base\\Model ÊàñËÄÖÂÖ∂Â≠êÁ±ªÁöÑ‰∏Ä‰∏™ÂÆû‰æãÔºå‰æãÂ¶ÇÂ≠êÁ±ª <a href=\"/doc/guide/2.0/db-active-record\">active record</a>Ôºå‰πüÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÂÖ≥ËÅîÊï∞ÁªÑ„ÄÇ</p>\r\n<p>DetailView‰ΩøÁî® yii\\widgets\\DetailView::$attributes Â±ûÊÄßÊù•ÂÜ≥ÂÆöÊòæÁ§∫Ê®°ÂûãÂì™‰∫õÂ±ûÊÄß‰ª•ÂèäÂ¶Ç‰ΩïÊ†ºÂºèÂåñ„ÄÇ\r\nÂèØÁî®ÁöÑÊ†ºÂºèÂåñÈÄâÈ°πÔºåËßÅ <a href=\"/doc/guide/2.0/output-formatting\">formatter section</a> Á´†ËäÇ„ÄÇ</p>\r\n<p>‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑDetailViewÁöÑ‰ΩøÁî®ÊñπÊ≥ïÂ¶Ç‰∏ãÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-keyword\">echo</span> DetailView::widget([\r\n    <span class=\"hljs-string\">\'model\'</span> =&gt; <span class=\"hljs-variable\">$model</span>,\r\n    <span class=\"hljs-string\">\'attributes\'</span> =&gt; [\r\n        <span class=\"hljs-string\">\'title\'</span>,               <span class=\"hljs-comment\">// title attribute (in plain text)</span>\r\n        <span class=\"hljs-string\">\'description:html\'</span>,    <span class=\"hljs-comment\">// description attribute formatted as HTML</span>\r\n        [                      <span class=\"hljs-comment\">// the owner name of the model</span>\r\n            <span class=\"hljs-string\">\'label\'</span> =&gt; <span class=\"hljs-string\">\'Owner\'</span>,\r\n            <span class=\"hljs-string\">\'value\'</span> =&gt; <span class=\"hljs-variable\">$model</span>-&gt;owner-&gt;name,\r\n        ],\r\n        <span class=\"hljs-string\">\'created_at:datetime\'</span>, <span class=\"hljs-comment\">// creation date formatted as datetime</span>\r\n    ],\r\n]);\r\n</code></pre>\r\n		</div>', 'Yii2,DetailView', '2', '1443001778', '1443001892', '2');
INSERT INTO `post` VALUES ('37', 'ListView', '\r\n<p>yii\\widgets\\ListView Â∞èÈÉ®‰ª∂Áî®‰∫éÊòæÁ§∫Êï∞ÊçÆÊèê‰æõËÄÖ <a href=\"/doc/guide/2.0/output-data-providers\">data provider</a> Êèê‰æõÁöÑÊï∞ÊçÆ„ÄÇ\r\nÊØè‰∏™Êï∞ÊçÆÊ®°ÂûãÁî®ÊåáÂÆöÁöÑËßÜÂõæÊñá‰ª∂ yii\\widgets\\ListView::$itemView Êù•Ê∏≤Êüì„ÄÇ\r\nÂõ†‰∏∫ÂÆÉÊèê‰æõÂºÄÁÆ±Âç≥Áî®ÂºèÁöÑÔºàËØëËÄÖÊ≥®ÔºöÂ∞ÅË£ÖÂ•ΩÁöÑÔºâÂàÜÈ°µ„ÄÅÊéíÂ∫è‰ª•ÂèäËøáÊª§ËøôÊ†∑‰∏Ä‰∫õÁâπÊÄßÔºåÊâÄ‰ª•ÂÆÉÂèØ‰ª•ÂæàÊñπ‰æøÂú∞‰∏∫ÊúÄÁªàÁî®Êà∑ÊòæÁ§∫‰ø°ÊÅØÂπ∂ÂêåÊó∂ÂàõÂª∫Êï∞ÊçÆÁÆ°ÁêÜÁïåÈù¢„ÄÇ</p>\r\n<p>‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑÁî®Ê≥ïÂ¶Ç‰∏ã‰æãÊâÄÁ§∫Ôºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">widgets</span>\\<span class=\"hljs-title\">ListView</span>;\r\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">data</span>\\<span class=\"hljs-title\">ActiveDataProvider</span>;\r\n\r\n<span class=\"hljs-variable\">$dataProvider</span> = <span class=\"hljs-keyword\">new</span> ActiveDataProvider([\r\n    <span class=\"hljs-string\">\'query\'</span> =&gt; Post::find(),\r\n    <span class=\"hljs-string\">\'pagination\'</span> =&gt; [\r\n        <span class=\"hljs-string\">\'pageSize\'</span> =&gt; <span class=\"hljs-number\">20</span>,\r\n    ],\r\n]);\r\n<span class=\"hljs-keyword\">echo</span> ListView::widget([\r\n    <span class=\"hljs-string\">\'dataProvider\'</span> =&gt; <span class=\"hljs-variable\">$dataProvider</span>,\r\n    <span class=\"hljs-string\">\'itemView\'</span> =&gt; <span class=\"hljs-string\">\'_post\'</span>,\r\n]);\r\n</code></pre>\r\n<p><code>_post</code> ËßÜÂõæÊñá‰ª∂ÂèØÂåÖÂê´Â¶Ç‰∏ã‰ª£Á†ÅÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-preprocessor\">&lt;?php</span>\r\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">helpers</span>\\<span class=\"hljs-title\">Html</span>;\r\n<span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">yii</span>\\<span class=\"hljs-title\">helpers</span>\\<span class=\"hljs-title\">HtmlPurifier</span>;\r\n<span class=\"hljs-preprocessor\">?&gt;</span>\r\n&lt;div <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span>=\"<span class=\"hljs-title\">post</span>\"&gt;\r\n    &lt;<span class=\"hljs-title\">h2</span>&gt;&lt;?= <span class=\"hljs-title\">Html</span>::<span class=\"hljs-title\">encode</span>($<span class=\"hljs-title\">model</span>-&gt;<span class=\"hljs-title\">title</span>) ?&gt;&lt;/<span class=\"hljs-title\">h2</span>&gt;\r\n    \r\n    &lt;?= <span class=\"hljs-title\">HtmlPurifier</span>::<span class=\"hljs-title\">process</span>($<span class=\"hljs-title\">model</span>-&gt;<span class=\"hljs-title\">text</span>) ?&gt;    \r\n&lt;/<span class=\"hljs-title\">div</span>&gt;\r\n</span></code></pre>\r\n<p>Âú®‰∏äÈù¢ÁöÑËßÜÂõæÊñá‰ª∂‰∏≠ÔºåÂΩìÂâçÁöÑÊï∞ÊçÆÊ®°Âûã <code>$model</code> ÊòØÂèØÁî®ÁöÑ„ÄÇÂè¶Â§ñÔºå‰∏ãÈù¢ÁöÑËøô‰∫õÂèòÈáè‰πüÊòØÂèØÁî®ÁöÑÔºö</p>\r\n<ul><li><code>$key</code>ÔºöÊ∑∑ÂêàÁ±ªÂûãÔºåÈîÆÁöÑÂÄº‰∏éÊï∞ÊçÆÈ°πÁõ∏ÂÖ≥ËÅî„ÄÇ</li>\r\n<li><code>$index</code>ÔºöÊï¥ÂûãÔºåÊòØÁî±Êï∞ÊçÆÊèê‰æõËÄÖËøîÂõûÁöÑÊï∞ÁªÑ‰∏≠‰ª•0Ëµ∑ÂßãÁöÑÊï∞ÊçÆÈ°πÁöÑÁ¥¢Âºï„ÄÇ</li>\r\n<li><code>$widget</code>ÔºöÁ±ªÂûãÊòØListViewÔºåÊòØÂ∞èÈÉ®‰ª∂ÁöÑÂÆû‰æã„ÄÇ</li>\r\n</ul><p>ÂÅáÂ¶Ç‰Ω†ÈúÄË¶Å‰º†ÈÄíÈôÑÂä†Êï∞ÊçÆÂà∞ÊØè‰∏Ä‰∏™ËßÜÂõæ‰∏≠Ôºå‰Ω†ÂèØ‰ª•ÂÉè‰∏ãÈù¢ËøôÊ†∑Áî® yii\\widgets\\ListView::$viewParams Â±ûÊÄß‰º†ÈÄíÈîÆÂÄºÂØπÔºö</p>\r\n<pre><code class=\"language-php hljs\"><span class=\"hljs-keyword\">echo</span> ListView::widget([\r\n    <span class=\"hljs-string\">\'dataProvider\'</span> =&gt; <span class=\"hljs-variable\">$dataProvider</span>,\r\n    <span class=\"hljs-string\">\'itemView\'</span> =&gt; <span class=\"hljs-string\">\'_post\'</span>,\r\n    <span class=\"hljs-string\">\'viewParams\'</span> =&gt; [\r\n        <span class=\"hljs-string\">\'fullView\'</span> =&gt; <span class=\"hljs-keyword\">true</span>,\r\n        <span class=\"hljs-string\">\'context\'</span> =&gt; <span class=\"hljs-string\">\'main-page\'</span>,\r\n        <span class=\"hljs-comment\">// ...</span>\r\n    ],\r\n]);\r\n</code></pre>\r\n<p>Âú®ËßÜÂõæ‰∏≠Ôºå‰∏äËø∞Ëøô‰∫õÈôÑÂä†Êï∞ÊçÆ‰πüÊòØÂèØ‰ª•‰Ωú‰∏∫ÂèòÈáèÊù•‰ΩøÁî®ÁöÑ„ÄÇ</p>\r\n', 'Yii2,ListView', '2', '1443001837', '1443001878', '1');
INSERT INTO `poststatus` VALUES ('1', 'ËçâÁ®ø', '1');
INSERT INTO `poststatus` VALUES ('2', 'Â∑≤ÂèëÂ∏É', '2');
INSERT INTO `poststatus` VALUES ('3', 'Â∑≤ÂΩíÊ°£', '3');
INSERT INTO `tag` VALUES ('60', 'Yii', '25');
INSERT INTO `tag` VALUES ('61', 'RESTful WebÊúçÂä°', '6');
INSERT INTO `tag` VALUES ('62', 'Yii2', '32');
INSERT INTO `tag` VALUES ('63', 'Gii', '9');
INSERT INTO `tag` VALUES ('64', 'Êü•ËØ¢ÊûÑÂª∫Âô®', '2');
INSERT INTO `tag` VALUES ('65', 'DAO', '8');
INSERT INTO `tag` VALUES ('66', 'GridView', '11');
INSERT INTO `tag` VALUES ('67', 'ListView', '5');
INSERT INTO `tag` VALUES ('68', 'DetailView', '5');
INSERT INTO `tag` VALUES ('69', 'ActiveRecord', '27');
INSERT INTO `tag` VALUES ('70', 'ÂÆâË£Ö', '4');
INSERT INTO `tag` VALUES ('71', 'Composer', '4');
INSERT INTO `tag` VALUES ('72', 'Â∞èÈÉ®‰ª∂', '1');
INSERT INTO `tag` VALUES ('73', 'widget', '1');
INSERT INTO `tag` VALUES ('74', 'ËßÜÈ¢ëÊïôÁ®ã', '1');
INSERT INTO `tag` VALUES ('75', 'ÊïôÁ®ã', '1');
INSERT INTO `user` VALUES ('1', 'suran', 'pG7TRyTIXlEbcenpi34TzmMYS2zDsMTF', '$2y$13$HtJqGRmc76KIRIwokii8AOQ1XZljXiuWCKUGFnH9vkTnfBpHtqgFu', null, 'weixi@weixistyle.com', '10', '1462597929', '1527750738');
INSERT INTO `user` VALUES ('2', 'michael', 'xqGDBMlylihvNddSQgDkjAdpJwV4d02C', '$2y$13$bJC0vECI9EPLq/kia9CAmOT060fxoT/HopseOnY.C9siZJDOoQguK', null, 'mchael@163.com', '10', '1475850924', '1475850924');
